<!DOCTYPE HTML>
<html lang="en" class="scroll-smooth">
<head>
<title>Kevin Hernandez</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/svg+xml" href="images/outlinever-01.svg" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

<style>
/* === CSS Variables for Theming === */
:root {
--bg-color: #000;
--text-color: #fff;
--text-muted-color: #6b7280;
--border-color: #4b5563;
--accent-color: #1f2937; /* For section numbers */
--sphere-color: 0xffffff; /* THREE.js color */
}

body.light-mode {
--bg-color: #ffffff;
--text-color: #000000;
--text-muted-color: #4b5563;
--border-color: #d1d5db;
--accent-color: #e5e7eb;
--sphere-color: 0x000000;
}


@font-face {
font-family: 'Neue Haas Display';
src: url('assets/webfonts/NeueHaasDisplayThin.ttf') format('truetype');
font-weight: 100;
font-style: normal;
font-display: swap;
}

/* Global Styles */

button:focus-visible {
outline: none;
box-shadow: 0 0 0 0px #000;
/* custom focus ring */
}


/* === Base Styles === */
* {
box-sizing: border-box;
margin: 0;
padding: 0;
-webkit-tap-highlight-color: transparent;
-webkit-focus-ring-color: transparent;
outline: none;
}

html {
height: 100%;
/* Hide scrollbar */
-ms-overflow-style: none;  /* IE and Edge */
scrollbar-width: none;
/* Firefox */
}
html::-webkit-scrollbar {
display: none; /* Chrome, Safari */
}

body {
/font-family: 'Inter', sans-serif;
font-family: 'Neue Haas Display', -apple-system, BlinkMacSystemFont, sans-serif;
/* Hide scrollbar */
-ms-overflow-style: none;  /* IE and Edge */
scrollbar-width: none;
/* Firefox */

/* UPDATED: Single source of truth for color transitions */
background-color: var(--bg-color);
color: var(--text-color);
transition: background-color 0.3s ease, color 0.3s ease;
}

body.modal-active {
overflow: hidden;
}

/* --- NEW: Stop .theme-wrapper from scrolling on mobile when modal is active --- */
body.modal-active .theme-wrapper {
overflow-y: hidden;
}

/* --- NEW: Disable footer links when modal is active --- */
body.modal-active .mobile-footer-links a,
body.modal-active .mobile-footer-top .logo-button {
pointer-events: none;
opacity: 0.25;
/* Make them look disabled */
}

body.modal-active .mobile-footer-top .info-button,
body.modal-active .mobile-footer-top .theme-toggle-label {
pointer-events: auto;
opacity: 1;
}


/* This targets the <a> tag inside the button to ensure its color updates */
body.modal-active #mobile-about-button a {
opacity:1;
background: none;
}

#mobile-about-button {
/* --- Layout & Spacing --- */
/padding: 1rem 0.5rem;
text-align: center; /* Center the 'a' tag's text */
width: 100%;
/* Ensure it fills the grid cell */
/* --- Text Styles --- */
/* (these will be inherited by the <a> tag) */
font-family: inherit;
/* Use the main site font */
font-size: 0.75rem;
text-transform: uppercase;
letter-spacing: 0.1em;
color: var(--text-muted-color);
/* --- Transitions --- */
transition: background-color 0.3s ease, opacity 0.3s ease, color 0.3s ease;
}

#mobile-about-button a {
color: inherit;
}

/#mobile-about-button:hover {
color: var(--text-color);
}      


/* --- END NEW --- */


/* Wrapper controls theme and layout */
.theme-wrapper {
background-color: var(--bg-color);
color: var(--text-color);
/* transition: background-color 0.3s ease, color 0.3s ease;
*/ /* REMOVED */
height: 100dvh; /* <<< --- FIX APPLIED --- */
overflow-x: hidden;
overflow-y: auto;
scroll-snap-type: y mandatory;
position: relative; /* Needed for z-index stacking */
}


body::-webkit-scrollbar {
display: none;
}

/* === Main Container for Scrolling === */
main {
width: 100vw;
position: relative; 
z-index: 10;
/* Sit on top of canvas */
}


/* === MOBILE: Default Section Layout (Vertical) === */
section {
height: 100dvh; /* <<< --- FIX APPLIED --- */
width: 100vw;
display: flex;
overflow: hidden;
padding: 2rem 1.5rem 8rem;
/* Make space for footer */
/* transition: background-color 0.3s ease;
*/ /* REMOVED */
background-color: var(--bg-color);

scroll-snap-align: start;
scroll-snap-stop: always;

position: relative;
}

#section-1 {
background-color: transparent;
}

/* === Content Animation (UPDATED) === */

.hero-text-large,
.text-divider,
.section-content {
opacity: 0;
transform: translateY(20px);
transition: opacity 0.7s cubic-bezier(0.23, 1, 0.32, 1), 
  transform 0.7s cubic-bezier(0.23, 1, 0.32, 1);
}

section.is-active .hero-text-large,
section.is-active .text-divider,
section.is-active .section-content {
opacity: 1;
transform: translateY(0);
}

section.is-active .hero-text-large { transition-delay: 0.4s;
}
section.is-active .text-divider { transition-delay: 0.6s;
}
section.is-active .section-content { transition-delay: 0.4s;
}


#theme-checkbox {
display: none;
}

a {
color: inherit;
text-decoration: none;
}

button {
background: none;
border: none;
padding: 0;
color: inherit;
cursor: pointer;
}

.nav-link:hover, .nav-link-left:hover, .mobile-footer-links a:hover {
color: var(--text-color);
background-color: var(--accent-color);
}

.logo-button.active {
/* This class is now used to keep the logo visible */
}

/* === DESKTOP: Side Navs === */

.nav-stacked-right {
top: 0;
right: 0;
height: 100%;
z-index: 100;
display: none; /* Hidden by default */
flex-direction: row;
flex-shrink: 0; 
border-left: 1px solid var(--border-color);
background-color: var(--bg-color);
/* transition: border-color 0.3s ease, background-color 0.3s ease;
*/ /* REMOVED */
/* --- ADDED TRANSITION FOR BORDER --- */
transition: border-width 0.5s cubic-bezier(0.76, 0, 0.24, 1),
  transform 0.8s cubic-bezier(0.23, 1, 0.32, 1) 0.5s;
/* MODIFIED: Added transform transition */

/* --- NEW: Initial state for animation --- */
transform: translateY(-100%);
}

/* --- ADDED RULE TO HIDE BORDER --- */
.nav-stacked-right.is-complete {
border-left-width: 0;
}

.nav-stacked-right .nav-link {
display: flex;
flex-direction: column;
justify-content: space-between;
align-items: center;
height: 100%;
width: 2rem;
padding: 2rem 0rem;
border-left: 1px solid var(--border-color);
transition: background-color 0.3s ease, /* Keep hover transition */
  width 0.5s cubic-bezier(0.76, 0, 0.24, 1), 
  padding 0.5s cubic-bezier(0.76, 0, 0.24, 1), 
  opacity 0.3s ease,
  border-width 0.5s cubic-bezier(0.76, 0, 0.24, 1);
overflow: hidden;
}

.nav-stacked-right .nav-link:first-child {
border-left: none;
}

.nav-stacked-right .nav-link.active {
width: 0;
padding-left: 0;
padding-right: 0;
opacity: 0;
border-left-width: 0;
}

.nav-stacked-right .nav-number, .nav-link-left .nav-number {
font-size: 0.875rem;
}

.nav-stacked-right .nav-text, .nav-link-left .nav-text {
font-size: 0.875rem;
letter-spacing: 0.1em;
text-transform: uppercase;
}

.vertical-text {
writing-mode: vertical-rl;
}

.nav-stacked-left .vertical-text {
transform: rotate(180deg);
}

.sidebar-left {
top: 0; 
left: 0;
padding: 1.5rem 0;
z-index: 10; 
display: none;
/* Hidden by default */
flex-direction: column;
height: 100%;
justify-content: space-between;
align-items: center;
border-right: 1px solid var(--border-color);
width: 2.5rem;
flex-shrink: 0;
background-color: var(--bg-color);
/* transition: border-color 0.3s ease, background-color 0.3s ease;
*/ /* REMOVED */

/* --- NEW: Added transition and initial state --- */
transform: translateY(-100%);
transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1) 0.5s;
}

/* === FIX: Reverted to original layout and added animation === */
.nav-stacked-left {
top: 0;
height: 100%;
z-index: 100;
display: none; /* Hidden by default (for mobile) */
flex-direction: row;
/* Corrected: Was 'column' */
border-right: 1px solid var(--border-color);
/* Added back */
flex-shrink: 0; 
background-color: var(--bg-color);
/* --- NEW: Added transition and initial state --- */
transform: translateY(-100%);
transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1) 0.5s;
}
/* === END FIX === */

.nav-link-left {
display: flex;
flex-direction: column;
justify-content: space-between;
align-items: center;
height: 100%;
padding: 2rem 0rem;
border-left: 1px solid var(--border-color);
transition: background-color 0.3s ease, /* Keep hover transition */
  width 0.5s cubic-bezier(0.76, 0, 0.24, 1), 
  padding 0.5s cubic-bezier(0.76, 0, 0.24, 1), 
  opacity 0.3s ease,
  border-width 0.5s cubic-bezier(0.76, 0, 0.24, 1);
overflow: hidden;
width: 0;
padding-left: 0;
padding-right: 0;
opacity: 0;
border-left-width: 0;
}

.nav-link-left:first-child { border-left: none;
}

.nav-link-left.active {
width: 2rem;
padding: 2rem 1rem;
opacity: 1;
border-left-width: 1px;
}
.nav-link-left.active:first-child { border-left-width: 0;
}

/* --- NEW: Desktop Nav Intro Animation --- */
.theme-wrapper.is-loaded .nav-stacked-right,
.theme-wrapper.is-loaded .sidebar-left, /* MODIFIED: Added .sidebar-left */
.theme-wrapper.is-loaded .nav-stacked-left {
transform: translateY(0);
}


/* === MOBILE: Header & Footer === */

.mobile-footer {
position: fixed;
bottom: 0;
left: 0;
width: 100%;
z-index: 100;
display: flex;
flex-direction: column;
background-color: var(--bg-color);
border-top: 1px solid var(--border-color);
padding-bottom: env(safe-area-inset-bottom); /* <<< --- FIX APPLIED --- */
/* transition: background-color 0.3s ease, border-color 0.3s ease;
*/ /* REMOVED */
}

.mobile-footer-top {
display: grid;
grid-template-columns: 1fr 1fr 1fr; 
align-items: center;
padding: 1rem 1.5rem;
border-bottom: 1px solid var(--border-color);
/* transition: border-color 0.3s ease;
*/ /* REMOVED */
}

.mobile-footer-top .info-button {
justify-self: start;
}
.mobile-footer-top .logo-button { 
justify-self: center;
}
.mobile-footer-top .theme-toggle-label {
justify-self: end;
}

.mobile-footer-links {
display: grid;
grid-template-columns: 1fr 1fr 1fr; 
}

.mobile-footer-links a {
text-align: center;
padding: 1rem 0.5rem;
font-size: 0.75rem;
text-transform: uppercase;
letter-spacing: 0.1em;
border-left: 1px solid var(--border-color);
transition: background-color 0.3s ease, opacity 0.3s ease;
/* MODIFIED: Added opacity */
/* Keep hover transition */
color: var(--text-muted-color);
}
.mobile-footer-links a:first-child {
border-left: none;
}
.mobile-footer-links a.active {
color: var(--text-color);
background-color: var(--accent-color);
}

/* === NEW: Mobile Work Nav (Section 2) === */
#mobile-work-nav {
/* display: none;
*/ /* MODIFIED: No longer using display */
/* NEW: Slide-in/out styles */
overflow: hidden;
max-height: 0;
transform: translateY(100%);
transition: max-height 0.4s cubic-bezier(0.23, 1, 0.32, 1), 
  transform 0.4s cubic-bezier(0.23, 1, 0.32, 1),
  border-width 0.1s linear;
border-bottom: 0px solid var(--border-color); /* Start with no border */
display: grid;
/* ADDED: Keep as grid */
grid-template-columns: 1fr 1fr 1fr;
/* ADDED: Keep as grid */
}


.mobile-footer.section-2-active #mobile-work-nav {
/* NEW: Slide-in styles */
max-height: 60px;
/* Adjust as needed for padding */
transform: translateY(0);
border-bottom-width: 1px;
transition-delay: 0s, 0s, 0.3s;
/* Delay border appearing */
}

/* Styling for the new work-nav links */
.mobile-work-nav-link {
text-align: center;
padding: 0.75rem 0.5rem;
font-size: 0.75rem;
text-transform: uppercase;
letter-spacing: 0.1em;
border-left: 1px solid var(--border-color);
transition: background-color 0.3s ease;
color: var(--text-muted-color);
cursor: pointer;
/* === NEW: Added for progress bar === */
position: relative;
overflow: hidden;
}
.mobile-work-nav-link:first-child {
border-left: none;
}
.mobile-work-nav-link.active,
.mobile-work-nav-link:hover {
color: var(--text-color);
background-color: var(--accent-color);
}

/* === NEW: Progress bar for mobile link === */
.mobile-work-nav-link.active::before {
content: '';
position: absolute;
left: 0;
top: 0;
height: 100%;
width: var(--progress, 0%);
/* Controlled by JS */
background: var(--text-color);
transition: width 0.1s linear;
z-index: 0;
}

/* === NEW: Span to allow text to sit above bar === */
.mobile-work-nav-link span {
position: relative;
z-index: 1;
background: linear-gradient(to right, var(--text-color) var(--progress, 0%), var(--text-color) var(--progress, 0%), var(--text-color) 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
/* Force span to take up full button area for alignment */
display: flex;
align-items: center;
justify-content: center;
width: 100%;
height: 100%;
}

/* === NEW: Active state text color change === */
.mobile-work-nav-link.active span {
background: linear-gradient(
  to right, 
  var(--bg-color) var(--progress, 0%), 
  var(--text-color) var(--progress, 0%), 
  var(--text-color) 100%
);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}

/* === END: Mobile Work Nav === */


/* === Icon Button Base Class === */
.icon-button {
width: 2rem;
height: 2rem;
border-radius: 50%;
cursor: pointer;
position: relative;
display: flex;
align-items: center;
justify-content: center;
/* transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, opacity 0.3s ease;
*/ /* REMOVED */
transition: opacity 0.3s ease, background-color 0.3s ease, color 0.3s ease;
/* ADDED back transitions */
}

.icon-button svg {
width: 1.25rem;
/* 20px */
height: 1.25rem;
/* 20px */
fill: currentColor;
transition: transform 0.3s ease;
}

/* === SVG Logo Button Styles === */
.logo-button {
width: 2rem;
height: 2rem;
border-radius: 50%;
cursor: pointer;
position: relative;
display: flex;
align-items: center;
justify-content: center;
border: 1px solid var(--text-color);
background-color: var(--bg-color);
/* Dark circle */
color: var(--text-color);
/* Light SVG */
/* transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, opacity 0.3s ease;
*/ /* REMOVED */
transition: opacity 0.3s ease;
}

.logo-button:hover {
opacity: 0.8;
background-color: var(--bg-color);
/* Keep bg on hover */
}

.logo-svg {
width: 1.25rem;
/* 20px */
height: 1.25rem;
/* 20px */
transition: transform 0.5s ease;
}

.logo-button:hover .logo-svg {
transform: scale(0.9);
}

/* SVG dot styles */
.dot {
position: absolute;
/color: var(--bg-color); 
width: 0.3rem; /* 5px */
height: 0.3rem;
/* 5px */
display: flex;
justify-content: center;
align-items: center;
background-color: var(--text-color);
/* Light dot */
border-radius: 50%;
transition: transform 0.5s ease;
}

.dot-bottom {
bottom: -0.1rem;
/* -2.5px */
left: 50%;
transform: translateX(-50%);
transform-origin: 0.15625rem -0.84375rem;
/* Corrected: 2.5px -13.5px */
}
.dot-left {
left: 0.0rem;
/* 1px */
top: 20%;
transform: translateY(-50%);
transform-origin: 0.9375rem 0.6rem;
/* 15px 9.6px */
}
.dot-right {
right: 0.0rem;
/* 1px */
top: 20%;
transform: translateY(-50%);
transform-origin: -0.8125rem 0.6rem;
/* -13px 9.6px */
}

.logo-button:hover .dot-bottom {
transform: translateX(-50%) rotate(360deg);
}
.logo-button:hover .dot-left {
transform: translateY(-50%) rotate(360deg);
}
.logo-button:hover .dot-right {
transform: translateY(-50%) rotate(360deg);
}


/* SVG icon styles */
.st0, .st3, .st5, .st7 {
stroke: currentColor;
stroke-miterlimit:10;
}
.st0 { stroke-width:10; }
.st3, .st7 { stroke-width:5;
}
.st7 { fill: none;
}
.st4, .st6 { fill: currentColor;
}
.st1 { display: none;
}
.st2, .st5, .st6 { display: inline;
}
/* === END SVG Logo Styles === */


/* Theme Toggle Button */
#theme-toggle {
/* Uses .icon-button */
border: 1px solid var(--text-color);
background-color: var(--text-color);
color: var(--bg-color);
}

.theme-toggle-label:hover #theme-toggle #theme-dot {
transform: scale(1.25);
}

#theme-dot {
width: 0.8rem;
height: 0.8rem;
border-radius: 50%;
background-color: currentColor;
transition: transform 0.3s ease;
}

/* Info Button */
.info-button {
/* Uses .icon-button */
border: 1px solid var(--text-color);
background-color: var(--text-color);
color: var(--bg-color);
}

.info-button:hover svg {
transform: scale(1.25);
}

.desktop-info-button {
writing-mode: vertical-rl;
margin-bottom: 1.5rem;
}

/* === NEW: Mobile Info Toggle Button === */
#mobile-info-toggle {
position: absolute;
top: 0.75rem;
left: 0.75rem;
z-index: 20;
display: none; /* Hidden by default (on desktop) */
}

#mobile-info-toggle.active {
background-color: var(--bg-color);
color: var(--text-color);
}
/* === END: Mobile Info Toggle Button === */

/* === NEW: Canvas Container Styles === */
#canvas-container {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 1; /* Sit behind the content */
opacity: 0;
transition: opacity 0.8s ease 0.2s;
/* Fade in */
align-content: center;
justify-items: center;
}
#canvas-container.is-visible {
opacity: 1;
}
#canvas-container canvas {
display: block;
width: 100%;
height: 100%;
}

/* === Section 1: Hero === */

.section-1-wrapper {
display: flex;
flex-direction: column;
width: 100%;
position: relative; /* ADD THIS */
z-index: 2;
/* ADD THIS (to sit on top of z-index: 1 canvas) */
}

.section-grid {
display: flex;
flex-direction: column;
width: 100%;
}

.text-column {
flex-grow: 1;
flex-basis: 50%;
display: none; /* Hiding text column */
flex-direction: column;
justify-content: center;
padding-top: 2rem;
}

.hero-text-large {
font-size: 1.5rem;
line-height: 1.6;
font-weight: 300;
}

.text-divider {
margin-top: 2rem;
padding-top: 2rem;
border-top: 1px solid var(--border-color);
font-size: 0.875rem;
line-height: 1.6;
color: var(--text-muted-color);
/* transition: border-color 0.3s ease, color 0.3s ease;
*/ /* REMOVED */
}

.brand-name {
color: var(--text-color);
font-weight: 500;
/* transition: color 0.3s ease; */ /* REMOVED */
}

/* === Sections 2-5 (Shared Styles) === */
.section-title-combined {
font-size: 1.875rem;
line-height: 1.4;
font-weight: 400;
display: flex;
flex-direction: column;
align-items: flex-start;
}

.section-number-inline {
font-size: 0.875rem;
color: var(--text-muted-color);
background-color: var(--accent-color);
padding: 0.25rem 0.75rem;
border-radius: 99px;
margin-bottom: 1rem;
/* transition: background-color 0.3s ease, color 0.3s ease;
*/ /* REMOVED */
}

.section-description {
font-size: 1.125rem;
line-height: 1.7;
color: var(--text-muted-color);
margin-top: 1.5rem;
max-width: 65ch;
}

.center-section {
align-items: center;
justify-content: center;
text-align: left;
}

/* === Marquee Styles === */
.marquee-container {
width: 100%;
padding: 0.1rem 0;
background-color: var(--bg-color); /* Match section bg */
border-top: 1px solid var(--border-color);
border-bottom: 1px solid var(--border-color);
overflow: hidden;
white-space: nowrap;
/* transition: background-color 0.3s ease, border-color 0.3s ease;*/ 
margin-top: 20rem;
/position: relative; 
position: absolute;
z-index: 5;
/* --- MODIFIED: Intro Animation --- */
transform: translateX(100%);
transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
align-self: anchor-center;
}

/* --- NEW: Marquee Animation Trigger --- */
section.is-active .marquee-container {
transform: translateX(0);
transition-delay: 0.5s;
/* Stagger after canvas fade-in */
}
...
</style>
</head>
<body>

<input type="checkbox" id="theme-checkbox">

<div class="mobile-nav">
  
  <div id="modal-container-side">
    <div class="modal-background">
      <div class="modal-content">
        
        <div class="modal-panel left">
          <p class="ls">
            EMAIL:
          </p>
          <div class="copyable-text" id="textEl" data-copy="kevin.hernandez@example.com">
            <span id="emailText">EMAIL: kevin.hernandez@example.com</span>
            <button id="copyButton" class="copy-circle" aria-label="Copy email to clipboard">
              COPY
            </button>
          </div>
          <p class="ls">
            SOCIALS
          </p>
          <p class="ls">
            INSTAGRAM
          </p>
          <p class="ls">
            LINKEDIN
          </p>
        </div>
        
        <div class="modal-panel right">
          <div class="bb">
            <img src="https://assets.codepen.io/1480814/av+1.png" alt="Masked">
          </div>
        </div>
        
      </div>
    </div>
  </div>
  
</div>

<div class="theme-wrapper">

  <div id="canvas-container">
    <canvas id="dot-canvas"></canvas>
  </div>

  <div class="sidebar-left">
    <a href="#section-1" data-navlink="section-1" class="nav-link logo-button active" title="Back to top">
      <svg class="logo-svg" viewBox="0 0 712.7 712" xmlns="http://www.w3.org/2000/svg">
        <polyline class="st0" points="640,628.1 640,443.7 645.9,427.9 645.9,315.7 640,300 640,84.1 72.7,84.1 72.7,628.1 640,628.1"/>
        <polyline class="st0" points="640,628.1 356.3,478.7 72.7,628.1"/>
        <line class="st0" x1="356.3" y1="478.7" x2="356.3" y2="84.1"/>
      </svg>
      <div class="dot dot-bottom"></div>
      <div class="dot dot-left"></div>
      <div class="dot dot-right"></div>
    </a>
    
    <button class="icon-button desktop-info-button" id="desktop-info-button-trigger" title="Show info">
      <span class="nav-text vertical-text">Info</span>
    </button>
  </div>

  <nav class="nav-stacked-left">
    <a href="#" data-navlink="section-2" class="nav-link-left">
      <span class="nav-number">•</span>
      <span class="nav-text vertical-text">Work</span>
    </a>
    <a href="#" data-navlink="section-3" class="nav-link-left">
      <span class="nav-number">••</span>
      <span class="nav-text vertical-text">Services</span>
    </a>
    <a href="#" data-navlink="section-4" class="nav-link-left">
      <span class="nav-number">•••</span>
      <span class="nav-text vertical-text">Inquiries</span>
    </a>
  </nav>

  <main>
    
    <section id="section-1" class="section">
      <div class="section-1-wrapper">
        <div class="section-grid">
          
          <div class="text-column">
            <h1 class="hero-text-large">
              Kevin Hernandez is a <span class="brand-name">Brand Designer & 3D Artist</span> based in Los Angeles, helping brands discover their visual identity.
            </h1>
            <div class="text-divider">
              CURRENTLY @ <span class="brand-name">FREELANCE</span>
              <br>
              PREVIOUSLY @ <span class="brand-name">BASIC/DEPT®</span>
            </div>
          </div>
          
          <div class="marquee-container">
            <div class="marquee-content-wrapper">
              <div class="marquee-content">
                KEVIN HERNANDEZ • BRAND DESIGNER & 3D ARTIST •
                KEVIN HERNANDEZ • BRAND DESIGNER & 3D ARTIST •
                KEVIN HERNANDEZ • BRAND DESIGNER & 3D ARTIST •
                KEVIN HERNANDEZ • BRAND DESIGNER & 3D ARTIST •
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </section>

    <section id="section-2" class="section section-portfolio">
      <div class="portfolio-container">
        
        <button id="mobile-info-toggle" class="icon-button">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 11.9999C12.5523 11.9999 13 11.5522 13 10.9999C13 10.4476 12.5523 9.99991 12 9.99991C11.4477 9.99991 11 10.4476 11 10.9999C11 11.5522 11.4477 11.9999 12 11.9999Z" fill="currentColor"></path><path d="M12 13.9999C11.4477 13.9999 11 14.4476 11 14.9999V16.9999C11 17.5522 11.4477 17.9999 12 17.9999C12.5523 17.9999 13 17.5522 13 16.9999V14.9999C13 14.4476 12.5523 13.9999 12 13.9999Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12 21.9999C17.5228 21.9999 22 17.5227 22 11.9999C22 6.47704 17.5228 1.99991 12 1.99991C6.47715 1.99991 2 6.47704 2 11.9999C2 17.5227 6.47715 21.9999 12 21.9999ZM12 3.99991C16.4183 3.99991 20 7.58164 20 11.9999C20 16.4182 16.4183 19.9999 12 19.9999C7.58172 19.9999 4 16.4182 4 11.9999C4 7.58164 7.58172 3.99991 12 3.99991Z" fill="currentColor"></path></svg>
        </button>
        
        <div class="portfolio-nav">
          <div class="category-group">
            <button class="section-btn active" data-gallery="3d">
              <span>01: 3D</span>
            </button>
          </div>
          <div class="category-group">
            <button class="section-btn" data-gallery="graphic">
              <span>02: Graphic</span>
            </button>
          </div>
          <div class="category-group">
            <button class="section-btn" data-gallery="product">
              <span>03: Product</span>
            </button>
          </div>
        </div>
        
        <div class="portfolio-content-area">
          <div class="portfolio-gallery">
            <div class="scroller active" id="scroller-3d">
              <div class="grid-item"><img class="grid-item-bg" src="https://assets.codepen.io/1480814/3.png" loading="lazy"><span class="item-title">Project One</span></div>
              <div class="grid-item"><img class="grid-item-bg" src="https://assets.codepen.io/1480814/2.png" loading="lazy"><span class="item-title">Project Two</span></div>
              <div class="grid-item"><img class="grid-item-bg" src="https://assets.codepen.io/1480814/1.png" loading="lazy"><span class="item-title">Project Three</span></div>
              <div class="grid-item"><img class="grid-item-bg" src="https://assets.codepen.io/1480814/4.png" loading="lazy"><span class="item-title">Project Four</span></div>
              <div class="grid-item"><img class="grid-item-bg" src="https://assets.codepen.io/1480814/5.png" loading="lazy"><span class="item-title">Project Five</span></div>
            </div>
            <div class="scroller" id="scroller-graphic">
              <div class="grid-item"><span class="item-title">Project Six</span></div>
              <div class="grid-item"><span class="item-title">Project Seven</span></div>
            </div>
            <div class="scroller" id="scroller-product">
              <div class="grid-item"><span class="item-title">Project Eight</span></div>
            </div>
          </div>
          
          <div class="portfolio-info info-collapsed">
            <div class="info-content active" data-info="3d">
              <h3>3D</h3>
              <p>Exploring form, light, and texture. This gallery showcases a collection of 3D rendering and modeling work.</p>
            </div>
            <div class="info-content" data-info="graphic">
              <h3>Graphic</h3>
              <p>Visual communication through typography, layout, and imagery. Identity systems and print collateral.</p>
            </div>
            <div class="info-content" data-info="product">
              <h3>Product</h3>
              <p>Designing digital experiences. User interface and interaction design for web and mobile applications.</p>
            </div>
          </div>
        </div>
        
      </div>
    </section>

    <section id="section-3" class="section center-section">
      <div class="section-content">
        <h2 class="section-title-combined">
          <span class="section-number-inline">02</span>
          Services
        </h2>
        <p class="section-description">
          Brand Strategy, Identity Design, 3D Modeling, Art Direction, Web Design, and UI/UX.
        </p>
      </div>
    </section>

    <section id="section-4" class="section center-section">
      <div class="section-content">
        <h2 class="section-title-combined">
          <span class="section-number-inline">03</span>
          Inquiries
        </h2>
        <p class="section-description" style="color: var(--text-color);">
          Let's build something.
        </p>
        <p class="section-description">
          Available for freelance projects and collaborations.
        </p>
      </div>
    </section>

  </main>

  <nav class="nav-stacked-right">
    <a href="#" data-navlink="section-2" class="nav-link">
      <span class="nav-number">•</span>
      <span class="nav-text vertical-text">Work</span>
    </a>
    <a href="#" data-navlink="section-3" class="nav-link">
      <span class="nav-number">••</span>
      <span class="nav-text vertical-text">Services</span>
    </a>
    <a href="#" data-navlink="section-4" class="nav-link">
      <span class="nav-number">•••</span>
      <span class="nav-text vertical-text">Inquiries</span>
    </a>
  </nav>

</div> <footer class="mobile-footer">
  
  <div id="mobile-work-nav" class="mobile-work-nav">
    <a class="mobile-work-nav-link active" data-gallery="3d"><span>3D</span></a>
    <a class="mobile-work-nav-link" data-gallery="graphic"><span>Graphic</span></a>
    <a class="mobile-work-nav-link" data-gallery="product"><span>Product</span></a>
  </div>
  
  <div class="mobile-footer-top">
    <button class="icon-button info-button" id="mobile-info-button-trigger" title="Show info">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 11.9999C12.5523 11.9999 13 11.5522 13 10.9999C13 10.4476 12.5523 9.99991 12 9.99991C11.4477 9.99991 11 10.4476 11 10.9999C11 11.5522 11.4477 11.9999 12 11.9999Z" fill="currentColor"></path><path d="M12 13.9999C11.4477 13.9999 11 14.4476 11 14.9999V16.9999C11 17.5522 11.4477 17.9999 12 17.9999C12.5523 17.9999 13 17.5522 13 16.9999V14.9999C13 14.4476 12.5523 13.9999 12 13.9999Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12 21.9999C17.5228 21.9999 22 17.5227 22 11.9999C22 6.47704 17.5228 1.99991 12 1.99991C6.47715 1.99991 2 6.47704 2 11.9999C2 17.5227 6.47715 21.9999 12 21.9999ZM12 3.99991C16.4183 3.99991 20 7.58164 20 11.9999C20 16.4182 16.4183 19.9999 12 19.9999C7.58172 19.9999 4 16.4182 4 11.9999C4 7.58164 7.58172 3.99991 12 3.99991Z" fill="currentColor"></path></svg>
    </button>
    
    <a href="#section-1" data-navlink="section-1" class="nav-link logo-button active" title="Back to top">
      <svg class="logo-svg" viewBox="0 0 712.7 712" xmlns="http://www.w3.org/2000/svg">
        <polyline class="st0" points="640,628.1 640,443.7 645.9,427.9 645.9,315.7 640,300 640,84.1 72.7,84.1 72.7,628.1 640,628.1"/>
        <polyline class="st0" points="640,628.1 356.3,478.7 72.7,628.1"/>
        <line class="st0" x1="356.3" y1="478.7" x2="356.3" y2="84.1"/>
      </svg>
      <div class="dot dot-bottom"></div>
      <div class="dot dot-left"></div>
      <div class="dot dot-right"></div>
    </a>
    
    <label for="theme-checkbox" class="icon-button theme-toggle-label" title="Toggle theme">
      <span id="theme-toggle" class="icon-button">
        <span id="theme-dot"></span>
      </span>
    </label>
  </div>
  
  <div class="mobile-footer-links">
    <a href="#section-2" data-navlink="section-2">Work</a>
    <a href="#section-3" data-navlink="section-3">Services</a>
    <a href="#section-4" data-navlink="section-4" id="mobile-about-button">Inquiries</a>
  </div>
</footer>

<script>
// Global state
let currentSectionIndex = 0;
let isDesktop = window.innerWidth >= 1025;
let isWheeling = false;
let touchStartY = 0;
let touchEndY = 0;
const scrollCooldown = 1000; // 1 second cooldown
let sections;
let numSections;
let desktopNavLinksRight;
let desktopNavLinksLeft;
let mobileNavLinks;
let themeWrapper;
let canvasContainer;

document.addEventListener("DOMContentLoaded", () => {
  sections = document.querySelectorAll(".section");
  numSections = sections.length;
  desktopNavLinksRight = document.querySelectorAll(".nav-stacked-right .nav-link");
  desktopNavLinksLeft = document.querySelectorAll(".nav-stacked-left .nav-link-left");
  mobileNavLinks = document.querySelectorAll(".mobile-footer-links a");
  themeWrapper = document.querySelector(".theme-wrapper");
  canvasContainer = document.getElementById('canvas-container');

  // Initial setup
  setupEventListeners();

  // Trigger intro animations
  setTimeout(() => {
    document.querySelector(".theme-wrapper").classList.add("is-loaded");
    if (isDesktop) {
      // On desktop, activate section 1 immediately
      activateSection(0);
    } else {
      // On mobile, let the observer handle activation
      // But we can still fade in the canvas if it's on section 1
      if (themeWrapper.scrollTop < window.innerHeight / 2) {
        if (canvasContainer) {
          canvasContainer.classList.add('is-visible');
        }
        document.getElementById('section-1')?.classList.add('is-active');
      }
    }
  }, 100); // Short delay to ensure transition readiness
});

function isMobile() {
  return window.innerWidth < 1025;
}

function setupEventListeners() {
  // Remove all existing listeners to prevent duplicates
  themeWrapper.removeEventListener("wheel", handleDesktopWheel);
  themeWrapper.removeEventListener("touchstart", handleTouchStart);
  themeWrapper.removeEventListener("touchmove", handleTouchMove);
  themeWrapper.removeEventListener("touchend", handleTouchEnd);
  document.removeEventListener("keydown", handleKeyDown);
  if (observer) {
    observer.disconnect();
  }
  
  // Reset styles
  sections.forEach(section => {
    section.style.transform = '';
    section.classList.remove('is-active');
  });

  if (isDesktop) {
    // --- DESKTOP ---
    themeWrapper.style.overflowY = 'hidden'; // Disable native scrolling
    // ^-- This was the key!
    
    document.addEventListener("keydown", handleKeyDown);
    themeWrapper.addEventListener("wheel", handleDesktopWheel, { passive: false });
    themeWrapper.addEventListener("touchstart", handleTouchStart, { passive: false });
    themeWrapper.addEventListener("touchmove", handleTouchMove, { passive: false });
    themeWrapper.addEventListener("touchend", handleTouchEnd, { passive: false });

    // Reset to section 0 and update navs
    scrollToSectionDesktop(0);
    
  } else {
    // --- MOBILE ---
    themeWrapper.style.overflowY = 'auto'; // Enable native scrolling
    
    // Clear desktop inline styles and active classes
    sections.forEach(section => {
      section.style.transform = '';
    });
    
    // Re-initialize mobile observer
    initMobileScrollObserver();
  }
}

function handleTouchStart(e) {
  if (isDesktop) {
    // e.preventDefault(); // This might be too aggressive, let's test
  }
  touchStartY = e.touches[0].clientY;
  isSwipeProcessed = false;
// Reset swipe flag
}

function handleTouchMove(e) {
  if (isDesktop) {
    e.preventDefault(); // Prevent scrolling on desktop
    touchEndY = e.touches[0].clientY;
    handleDesktopSwipe();
  }
}

function handleTouchEnd(e) {
  if (isDesktop) {
    touchEndY = e.changedTouches[0].clientY;
    handleDesktopSwipe();
  }
  touchStartY = 0;
  touchEndY = 0;
}

function activateSection(index) {
  if (index < 0 || index >= numSections) return;

  // Deactivate all sections
  sections.forEach((section, i) => {
    // Only remove 'is-active' if it's not the new index
    if (i !== index) {
      section.classList.remove('is-active');
    }
  });
  
  // Activate the new section
  sections[index].classList.add('is-active');
  
  // Update mobile nav
  mobileNavLinks.forEach((link, i) => {
    const linkSection = link.getAttribute('data-navlink');
    // Use 'section-' + (index + 1) to match
    link.classList.toggle('active', linkSection === `section-${index + 1}`);
  });
  
  // Logo button logic (active if not section 1)
  const logoButtons = document.querySelectorAll('.logo-button');
  logoButtons.forEach(btn => {
    btn.classList.toggle('active', index === 0);
  });
  
  // --- NEW: Toggle mobile work nav ---
  const mobileFooter = document.querySelector('.mobile-footer');
  if(mobileFooter) {
    mobileFooter.classList.toggle('section-2-active', index === 1); // Index 1 is Section 2
  }
  // --- END NEW ---

  // Update desktop navs
  updateDesktopActiveNav(index);

  // Special case for section 1 canvas
  if (canvasContainer) {
    if (index === 0) {
      canvasContainer.classList.add('is-visible');
    } else {
      // Optionally hide canvas if not on section 1
      // canvasContainer.classList.remove('is-visible');
    }
  }
}

// This function is for *instant* visual updates (desktop)
function updateDesktopActiveNav(index) {
  if (!isDesktop) return;
  
  // Right-side nav (Sections 2, 3, 4)
  desktopNavLinksRight.forEach((link, i) => {
    // i=0 is for section-2 (index 1)
    // i=1 is for section-3 (index 2)
    // i=2 is for section-4 (index 3)
    link.classList.toggle('active', i === (index - 1));
  });

  // Left-side nav (Sections 2, 3, 4)
  desktopNavLinksLeft.forEach((link, i) => {
    // i=0 is for section-2 (index 1)
    // i=1 is for section-3 (index 2)
    // i=2 is for section-4 (index 3)
    link.classList.toggle('active', i === (index - 1));
  });
  
  // Logo button (Section 1)
  document.querySelectorAll('.sidebar-left .logo-button').forEach(btn => {
    btn.classList.toggle('active', index === 0);
  });
  
  // --- FIX: Hide right nav border when last section is active ---
  const rightNav = document.querySelector('.nav-stacked-right');
  if (rightNav) {
    rightNav.classList.toggle('is-complete', index === numSections - 1);
  }
  // --- END FIX ---
}

// This function is for *animating* the scroll (desktop)
function scrollToSectionDesktop(index) {
  if (document.body.classList.contains('modal-active')) return;
  if (index < 0 || index >= numSections || isWheeling) return;
  if (index === currentSectionIndex) return;

  isWheeling = true;
  
  const direction = index > currentSectionIndex ? 'down' : 'up';
  
  if (direction === 'down') {
    // Sliding a new section *in* from the right
    sections[index].style.transform = 'translateX(100%)';
    sections[index].style.transition = 'transform 0.8s cubic-bezier(0.23, 1, 0.32, 1)';
    
    // Must trigger reflow
    sections[index].getBoundingClientRect(); 
    
    sections[index].classList.add('is-active'); // Activate it *before* animation
    sections[index].style.transform = 'translateX(0)';
    
  } else {
    // Sliding the *current* section *out* to the right
    sections[currentSectionIndex].style.transform = 'translateX(100%)';
    sections[currentSectionIndex].style.transition = 'transform 0.8s cubic-bezier(0.23, 1, 0.32, 1)';
    sections[currentSectionIndex].classList.remove('is-active');
    
    sections[index].classList.add('is-active'); // Activate new one
  }
  
  currentSectionIndex = index;
  updateDesktopActiveNav(currentSectionIndex);

  // --- FIX: Hide right nav border when last section is active ---
  const rightNav = document.querySelector('.nav-stacked-right');
if (rightNav) { // numSections is defined in the global script scope
    rightNav.classList.toggle('is-complete', index === numSections - 1);
}
  // --- END FIX ---

  if (canvasContainer) {
    canvasContainer.classList.add('is-visible');
  }
}
function scrollToSectionDesktop(index) {
  if (document.body.classList.contains('modal-active')) return;
if (index < 0 || index >= numSections || isWheeling) return;
  if (index === currentSectionIndex) return;
  isWheeling = true;
sections.forEach((section, i) => {
    if (i <= index) {
      section.style.transform = 'translateX(0)';
      section.classList.add('is-active');
    } else {
      section.style.transform = 'translateX(100%)';
      section.classList.remove('is-active');
    }
  });
currentSectionIndex = index;
  updateDesktopActiveNav(currentSectionIndex);

  setTimeout(() => {
    isWheeling = false;
  }, scrollCooldown);
}
let wheelTimeout = null;
let wheelDirection = 0;

function handleDesktopWheel(e) {
  if (document.body.classList.contains('modal-active')) return;

// Check if the wheel event is happening inside a horizontally scrollable element
  let target = e.target;
let scrollerElement = null;
  
  while (target) {
    if (target.classList && target.classList.contains('scroller')) {
      scrollerElement = target;
      break;
    }
    if (target === themeWrapper) break; // Stop at the main wrapper
    target = target.parentElement;
  }

  // If inside a scroller, let it scroll horizontally
  if (scrollerElement) {
    const delta = Math.abs(e.deltaX) > Math.abs(e.deltaY) ? e.deltaX : e.deltaY;
    
    // Check if we can scroll more in the wheel's direction
    const canScrollMore = (delta > 0 && scrollerElement.scrollLeft + scrollerElement.clientWidth < scrollerElement.scrollWidth - 1) ||
                          (delta < 0 && scrollerElement.scrollLeft > 1);

    if (canScrollMore) {
      // Let the horizontal scroll happen
      scrollerElement.scrollLeft += delta;
      return; // Do not trigger vertical section scroll
    }
  }

  // --- Vertical Section Scroll Logic ---
  e.preventDefault(); // Prevent default only if we're not horizontal scrolling

  if (isWheeling) return;

  const deltaY = e.deltaY;
  
  if (deltaY > 0) {
    // Scrolling down
    scrollToSectionDesktop(currentSectionIndex + 1);
  } else if (deltaY < 0) {
    // Scrolling up
    scrollToSectionDesktop(currentSectionIndex - 1);
  }
}

function handleKeyDown(e) {
  if (document.body.classList.contains('modal-active')) return;

  if (e.key === 'ArrowDown' || e.key === 'PageDown' || e.key === ' ') {
    e.preventDefault();
    scrollToSectionDesktop(currentSectionIndex + 1);
  } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
    e.preventDefault();
    scrollToSectionDesktop(currentSectionIndex - 1);
  } else if (e.key === 'Home') {
    e.preventDefault();
    scrollToSectionDesktop(0);
  } else if (e.key === 'End') {
    e.preventDefault();
    scrollToSectionDesktop(numSections - 1);
  }
}

let isSwipeProcessed = false;

function handleDesktopSwipe() {
  if (isWheeling || isSwipeProcessed) return;
  if (document.body.classList.contains('modal-active')) return;
  const swipeThreshold = 50;
  const swipeDistance = Math.abs(touchStartY - touchEndY);

  if (swipeDistance > swipeThreshold) {
    isSwipeProcessed = true;
    if (touchStartY - touchEndY > swipeThreshold) {
      // Swiped up
      scrollToSectionDesktop(currentSectionIndex + 1);
    } else if (touchEndY - touchStartY > swipeThreshold) {
      // Swiped down
      scrollToSectionDesktop(currentSectionIndex - 1);
    }
    
    setTimeout(() => {
      isSwipeProcessed = false;
    }, scrollCooldown);
  }
}

let observer;
function initMobileScrollObserver() {
  if (!('IntersectionObserver' in window)) {
    console.warn('IntersectionObserver not supported, mobile nav highlighting will not work.');
    document.getElementById('section-1')?.classList.add('is-active');
    if (canvasContainer) canvasContainer.classList.add('is-visible');
    return;
  }

  observer = new IntersectionObserver((entries) => {
    const mobileFooter = document.querySelector('.mobile-footer');
    
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.id;
        const index = Array.from(sections).indexOf(entry.target);
        
        // Update URL hash
        // window.location.hash = id; // This causes jumps, disable
        
        // Activate the corresponding section
        activateSection(index);
      }
    });
  }, {
    root: themeWrapper, // Observe inside the scrolling container
    threshold: 0.5, // 50% of the section must be visible
    rootMargin: '0px 0px -50px 0px' // Adjust root margin to be more accurate
  });

  sections.forEach(section => {
    observer.observe(section);
  });
  
  // Manually check which section is active on load
  setTimeout(() => {
    let maxVisible = 0;
    let activeIndex = 0;
    const containerRect = themeWrapper.getBoundingClientRect();

    sections.forEach((section, index) => {
      const rect = section.getBoundingClientRect();
      const visibleHeight = Math.max(0, Math.min(rect.bottom, containerRect.bottom) - Math.max(rect.top, containerRect.top));
      
      if (visibleHeight > maxVisible) {
        maxVisible = visibleHeight;
        activeIndex = index;
      }
    });
    
    if (maxVisible > 0) {
      activateSection(activeIndex);
    } else if (themeWrapper.scrollTop < window.innerHeight / 2) {
      activateSection(0); // Default to first section if nothing else
    }
  }, 100); // Small delay to let layout settle
}

// Re-setup listeners on resize
window.addEventListener('resize', () => {
  // onWindowResize(); // Removed this line which was causing an error
  const newIsDesktop = window.innerWidth >= 1025;
  if (newIsDesktop !== isDesktop) {
    isDesktop = newIsDesktop;
    setupEventListeners();
  }
});

// Click handlers for nav links
document.querySelectorAll('.nav-link, .nav-link-left, .sidebar-left .logo-button').forEach(link => {
  link.addEventListener('click', (e) => {
    e.preventDefault();
    if (isDesktop) {
      if (document.body.classList.contains('modal-active')) return;
      const targetId = link.getAttribute('data-navlink');
      const targetElement = document.getElementById(targetId);
      if (targetElement) {
        const index = Array.from(sections).indexOf(targetElement);
        scrollToSectionDesktop(index);
      }
    } else {
      // On mobile, use native smooth scroll
      const targetId = link.getAttribute('href');
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        themeWrapper.scrollTo({
          top: targetElement.offsetTop,
          behavior: 'smooth'
        });
      }
    }
  });
});

// Mobile footer links
document.querySelectorAll('.mobile-footer-links a').forEach(link => {
  link.addEventListener('click', (e) => {
    e.preventDefault();
    const targetId = link.getAttribute('href');
    const targetElement = document.querySelector(targetId);
    if (targetElement) {
      themeWrapper.scrollTo({
        top: targetElement.offsetTop,
        behavior: 'smooth'
      });
    }
  });
});
</script>

<script>
// Modal Logic (using jQuery)
$(document).ready(function() {
  const modal = $('#modal-container-side');
  const themeWrapper = $('.theme-wrapper'); // Get the scrolling container

  function isMobile() {
    return window.innerWidth < 1025;
  }

  // Combined trigger for desktop and mobile
  $('#desktop-info-button-trigger, #mobile-info-button-trigger').on('click', function() {
    
    if (modal.hasClass('visible')) {
      // --- CLOSE MODAL ---
      modal.addClass('out');
      $('body').removeClass('modal-active');
      
      // On mobile, reset the modal's top position
      if (isMobile()) {
        // Delay to reset *after* the close animation
        setTimeout(() => {
          modal.css('top', '');
        }, 500); // Match animation duration
      }
      
    } else {
      // --- OPEN MODAL ---
      
      // On mobile, we need to align the modal to the current scroll position
      if (isMobile()) {
        const scrollTop = themeWrapper.scrollTop(); // Get current scroll position
        modal.css('top', scrollTop + 'px'); // Set modal's top to the scroll position
      }
      
      modal.removeAttr('class').addClass('visible');
      $('body').addClass('modal-active');
    }
  });

  // Clean up classes after animation
  $('#modal-container-side').on('animationend webkitAnimationEnd', function(e) {
    if (e.target === this && $(this).hasClass('out')) {
      $(this).removeAttr('class');
    }
  });
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const themeCheckbox = document.getElementById('theme-checkbox');
  
  if (themeCheckbox) {
    themeCheckbox.addEventListener('change', function() {
      document.body.classList.toggle('light-mode', this.checked);
    });
    
    // Set initial theme based on checkbox state (if it was checked/unchecked)
    document.body.classList.toggle('light-mode', themeCheckbox.checked);
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  
  // --- NEW: Mobile Info Toggle Logic ---
  const mobileInfoToggle = document.getElementById('mobile-info-toggle');
  const portfolioInfoSection = document.querySelector('.portfolio-info');

  if (mobileInfoToggle && portfolioInfoSection) {
    mobileInfoToggle.addEventListener('click', () => {
      portfolioInfoSection.classList.toggle('info-collapsed');
      mobileInfoToggle.classList.toggle('active');
    });
  }
  // --- END: Mobile Info Toggle Logic ---
  
  const buttons = document.querySelectorAll('.section-btn');
  const mobileWorkNavLinks = document.querySelectorAll('.mobile-work-nav-link'); // For future use
  const scrollers = {
    '3d': document.getElementById('scroller-3d'),
    'graphic': document.getElementById('scroller-graphic'),
    'product': document.getElementById('scroller-product')
  };
  
  // Select info content
  const infoContents = {
    '3d': document.querySelector('.info-content[data-info="3d"]'),
    'graphic': document.querySelector('.info-content[data-info="graphic"]'),
    'product': document.querySelector('.info-content[data-info="product"]')
  };
  const allInfoContent = document.querySelectorAll('.info-content');

  let currentGallery = '3d';
  let scrollPositions = { '3d': 0, 'graphic': 0, 'product': 0 }; // NEW: Save scroll positions

  function switchGallery(galleryType) {
    if (currentGallery === galleryType) return;

    const oldScroller = scrollers[currentGallery];
    const newScroller = scrollers[galleryType];
    
    // Fade out old, fade in new
    if (oldScroller) {
      oldScroller.classList.remove('active');
    }
    if (newScroller) {
      newScroller.classList.add('active');
      // NEW: Restore scroll position
      newScroller.scrollLeft = scrollPositions[galleryType];
    }
    
    // Switch info content
    allInfoContent.forEach(content => content.classList.remove('active'));
    if (infoContents[galleryType]) {
      infoContents[galleryType].classList.add('active');
    }

    currentGallery = galleryType;
  }

  function updateProgress(scroller, button) {
    if (!scroller || !button) return;
    const scrollPercent = scroller.scrollLeft / (scroller.scrollWidth - scroller.clientWidth);
    button.style.setProperty('--progress', `${scrollPercent * 100}%`);
  }

  buttons.forEach(button => {
    button.addEventListener('click', () => {
      const galleryType = button.getAttribute('data-gallery');
      
      buttons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      
      // Sync mobile links
      mobileWorkNavLinks.forEach(link => link.classList.remove('active'));
      const matchingMobileLink = document.querySelector(`.mobile-work-nav-link[data-gallery="${galleryType}"]`);
      matchingMobileLink?.classList.add('active');

      switchGallery(galleryType);
    });
  });

  // --- NEW: Mobile Nav Link Listeners ---
  mobileWorkNavLinks.forEach(link => {
    link.addEventListener('click', () => {
      const galleryType = link.getAttribute('data-gallery');
      
      mobileWorkNavLinks.forEach(l => l.classList.remove('active'));
      link.classList.add('active');
      
      // Sync desktop/tablet buttons
      buttons.forEach(b => b.classList.remove('active'));
      const matchingButton = document.querySelector(`.section-btn[data-gallery="${galleryType}"]`);
      matchingButton?.classList.add('active');

      switchGallery(galleryType);
    });
  });

  Object.keys(scrollers).forEach(key => {
    scrollers[key].addEventListener('scroll', () => {
      if (key === currentGallery) {
        const activeButton = document.querySelector(`.section-btn[data-gallery="${key}"]`);
        const activeMobileLink = document.querySelector(`.mobile-work-nav-link[data-gallery="${key}"]`);
        updateProgress(scrollers[key], activeButton);
        updateProgress(scrollers[key], activeMobileLink);
        
        // NEW: Save scroll position as user scrolls
        scrollPositions[key] = scrollers[key].scrollLeft;
      }
    });
  });

  const initialButton = document.querySelector(`.section-btn[data-gallery="${currentGallery}"]`);
  const initialMobileLink = document.querySelector(`.mobile-work-nav-link[data-gallery="${currentGallery}"]`);
  if (initialButton) initialButton.classList.add('active');
  if (initialMobileLink) initialMobileLink.classList.add('active');
  if (scrollers[currentGallery]) scrollers[currentGallery].classList.add('active');
  if (infoContents[currentGallery]) infoContents[currentGallery].classList.add('active');
});
</script>

<script>
// Dot Canvas Animation
const canvas = document.getElementById('dot-canvas');
const ctx = canvas.getContext('2d');
const canvasContainer = document.getElementById('canvas-container');

// Debounce function
function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

let dots = [];
const dotCount = 800; // Total dots
const gridSize = 25; // Spacing
let columns, rows;
let color = { r: 255, g: 255, b: 255 }; // Default (light mode)
let targetColor = { r: 255, g: 255, b: 255 };

const mouse = {
  x: Infinity,
  y: Infinity
};

// Wave properties
let currentWave = 0;
const waveSpeed = 20; // How fast the wave travels
const waveThickness = 200; // How wide the wave is

function resizeCanvas() {
  const dpr = window.devicePixelRatio || 1;
  const rect = canvasContainer.getBoundingClientRect();
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  ctx.scale(dpr, dpr);
  
  canvas.style.width = `${rect.width}px`;
  canvas.style.height = `${rect.height}px`;

  dots = [];
  columns = Math.floor(canvas.width / dpr / gridSize) + 1;
  rows = Math.floor(canvas.height / dpr / gridSize) + 1;
  const startX = (canvas.width / dpr - (columns - 1) * gridSize) / 2;
  const startY = (canvas.height / dpr - (rows - 1) * gridSize) / 2;
  
  for(let i = 0; i < columns; i++) {
    for(let j = 0; j < rows; j++) {
      dots.push({
        x: startX + i * gridSize,
        y: startY + j * gridSize,
        baseX: startX + i * gridSize,
        baseY: startY + j * gridSize
      });
    }
  }
}

// Debounced resize
const debouncedResize = debounce(resizeCanvas, 100);
window.addEventListener('resize', debouncedResize);

// Initial theme check
function updateColors() {
  const bodyStyles = window.getComputedStyle(document.body);
  const sphereColorHex = bodyStyles.getPropertyValue('--sphere-color').trim().replace('0x', '#');
  
  // Convert hex to RGB
  const hex = sphereColorHex.substring(1);
  targetColor.r = parseInt(hex.substring(0, 2), 16);
  targetColor.g = parseInt(hex.substring(2, 4), 16);
  targetColor.b = parseInt(hex.substring(4, 6), 16);
}
updateColors(); // Initial set

// Listen for theme changes
const themeCheckbox = document.getElementById('theme-checkbox');
themeCheckbox.addEventListener('change', updateColors);


canvasContainer.addEventListener('mousemove', (e) => {
  const rect = canvas.getBoundingClientRect();
  mouse.x = e.clientX - rect.left;
  mouse.y = e.clientY - rect.top;
});

canvasContainer.addEventListener('mouseleave', () => {
  mouse.x = Infinity;
  mouse.y = Infinity;
});

let lastTime = 0;
function animate(timestamp) {
  const deltaTime = timestamp - lastTime;
  lastTime = timestamp;
  
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Animate wave
  currentWave += waveSpeed * (deltaTime / 1000 || 0.016);
  const maxDist = Math.hypot(canvas.width / 2, canvas.height / 2);
  if (currentWave > maxDist + waveThickness) {
    currentWave = 0; // Reset wave
  }

  // Lerp color
  color.r += (targetColor.r - color.r) * 0.1;
  color.g += (targetColor.g - color.g) * 0.1;
  color.b += (targetColor.b - color.b) * 0.1;
  
  const centerX = (canvas.width / (window.devicePixelRatio || 1)) / 2;
  const centerY = (canvas.height / (window.devicePixelRatio || 1)) / 2;

  dots.forEach(dot => {
    // Wave pulse effect
    const dist = Math.hypot(dot.x - centerX, dot.y - centerY);
    const distToWave = Math.abs(dist - currentWave);
    let pulseFactor = 0;
    if(distToWave < waveThickness/2){
      pulseFactor = 1 - distToWave / (waveThickness/2);
      pulseFactor = Math.sin(pulseFactor*Math.PI/2);
    }
    
    // Mouse glow effect
    const mouseDist = Math.hypot(dot.x - mouse.x, dot.y - mouse.y);
    let glowFactor = 0;
    const glowRadius = 50;
    if(mouseDist < glowRadius){
      glowFactor = (1 - mouseDist/glowRadius);
    }
    
    const size = (canvas.width < 480 ? 2 : 4) + pulseFactor*12 + glowFactor*10;
    const opacity = Math.min(1, 0.2 + pulseFactor*0.8 + glowFactor*0.9);
    
    ctx.beginPath();
    ctx.arc(dot.x, dot.y, size, 0, Math.PI*2);
    ctx.fillStyle = `rgba(${color.r}, ${color.g}, ${color.b}, ${opacity})`;
    ctx.fill();
  });
  
  requestAnimationFrame(animate);
}

// Start animation and initial resize
resizeCanvas();
animate(0);


// Copy button logic
const copyButton = document.getElementById('copyButton');
const textEl = document.getElementById('textEl');
const emailText = document.getElementById('emailText');

function copyToClipboard() {
  const textToCopy = textEl.getAttribute('data-copy') || textEl.textContent.replace(/^EMAIL:\s*/i, '');
  navigator.clipboard.writeText(textToCopy).then(() => {
    copyButton.textContent = 'COPIED';
    emailText.textContent = 'COPIED TO CLIPBOARD';
    
    setTimeout(() => {
      copyButton.textContent = 'COPY';
      emailText.textContent = 'EMAIL: ' + textToCopy;
    }, 2000);
  }).catch(err => {
    console.error('Failed to copy: ', err);
    copyButton.textContent = 'FAILED';
    setTimeout(() => {
      copyButton.textContent = 'COPY';
    }, 2000);
  });
}

copyButton.addEventListener('click', copyToClipboard);

</script>

</body>
</html>
