<!DOCTYPE HTML>
<html lang="en" class="scroll-smooth">
<head>
<title>Kevin Hernandez</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="icon" type="image/svg+xml" href="images/outlinever-01.svg" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://unpkg.com/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

<style>
/* === CSS Variables for Theming === */
:root {
--bg-color: #000;
--text-color: #fff;
--text-muted-color: #6b7280;
--border-color: #4b5563;
--accent-color: #1f2937; /* For section numbers */
--sphere-color: 0xffffff; /* THREE.js color */
}

body.light-mode {
--bg-color: #ffffff;
--text-color: #000000;
--text-muted-color: #4b5563;
--border-color: #d1d5db;
--accent-color: #e5e7eb;
--sphere-color: 0x000000;
}

/* === Base Styles === */


@font-face {
font-family: 'Neue Haas Display';
src: url('assets/webfonts/NeueHaasDisplayThin.ttf') format('truetype');
font-weight: 100;
font-style: normal;
font-display: swap;
}

button:focus-visible {
outline: none;
box-shadow: 0 0 0 0px #000; /* custom focus ring */
}


* {
box-sizing: border-box;
margin: 0;
padding: 0;
-webkit-tap-highlight-color: transparent;
-webkit-focus-ring-color: transparent;
outline: none;
touch-action: manipulation;

}

html {
height: 100%;
/* Hide scrollbar */
-ms-overflow-style: none;  /* IE and Edge */
scrollbar-width: none;  /* Firefox */
overscroll-behavior: none;
touch-action: manipulation;
overflow: hidden;

}
html::-webkit-scrollbar {
display: none; /* Chrome, Safari */
}

body {
/font-family: 'Inter', sans-serif;
font-family: 'Neue Haas Display', -apple-system, BlinkMacSystemFont, sans-serif;
/* Hide scrollbar */
-ms-overflow-style: none;  /* IE and Edge */
scrollbar-width: none;  /* Firefox */
touch-action: manipulation;
/* UPDATED: Single source of truth for color transitions */
background-color: var(--bg-color);
color: var(--text-color);
transition: background-color 0.3s ease, color 0.3s ease;
}

body.modal-active {
overflow: hidden;
}

/* --- NEW: Stop .theme-wrapper from scrolling on mobile when modal is active --- */
body.modal-active .theme-wrapper {
overflow-y: hidden;
}

/* --- NEW: Disable footer links when modal is active --- */
body.modal-active .mobile-footer-links a,
body.modal-active .mobile-footer-top .logo-button {
pointer-events: none;
opacity: 0.25; /* Make them look disabled */
}

body.modal-active .mobile-footer-top .info-button,
body.modal-active .mobile-footer-top .theme-toggle-label {
pointer-events: auto;
opacity: 1;
}


/* This targets the <a> tag inside the button to ensure its color updates */
body.modal-active #mobile-about-button a {
opacity:1;
background: none;
}

#mobile-about-button {
/* --- Layout & Spacing --- */
/padding: 1rem 0.5rem;
text-align: center; /* Center the 'a' tag's text */
width: 100%; /* Ensure it fills the grid cell */
/* --- Text Styles --- */
/* (these will be inherited by the <a> tag) */
font-family: inherit; /* Use the main site font */
font-size: 0.75rem;
text-transform: uppercase;
letter-spacing: 0.1em;
color: var(--text-muted-color);
/* --- Transitions --- */
transition: background-color 0.3s ease, opacity 0.3s ease, color 0.3s ease;
}

#mobile-about-button a {
color: inherit; 
}

/#mobile-about-button:hover {
color: var(--text-color);
}      


/* --- END NEW --- */


/* Wrapper controls theme and layout */
.theme-wrapper {
background-color: var(--bg-color);
color: var(--text-color);
height: 100svh;
overflow-x: hidden;
overflow-y: auto; 
scroll-snap-type: y mandatory;
position: relative; /* Needed for z-index stacking */
}


body::-webkit-scrollbar {
display: none;
}

/* === Main Container for Scrolling === */
main {
width: 100vw;
position: relative; 
z-index: 10; /* Sit on top of canvas */
}


/* === MOBILE: Default Section Layout (Vertical) === */
section {
height: 100vh;
width: 100vw;
display: flex;
overflow: hidden;
padding: 2rem 1.5rem 8rem;
background-color: var(--bg-color);
scroll-snap-align: start;
scroll-snap-stop: always;
position: relative;
}

#section-1 {
background-color: transparent;
}

/* === Content Animation (UPDATED) === */

.hero-text-large,
.text-divider,
.section-content {
opacity: 0;
transform: translateY(20px);
transition: opacity 0.7s cubic-bezier(0.23, 1, 0.32, 1), 
transform 0.7s cubic-bezier(0.23, 1, 0.32, 1);
}

section.is-active .hero-text-large,
section.is-active .text-divider,
section.is-active .section-content {
opacity: 1;
transform: translateY(0);
}

section.is-active .hero-text-large { transition-delay: 0.4s;
}
section.is-active .text-divider { transition-delay: 0.6s;
}
section.is-active .section-content { transition-delay: 0.4s;
}


#theme-checkbox {
display: none;
}

a {
color: inherit;
text-decoration: none;
}

button {
background: none;
border: none;
padding: 0;
color: inherit;
cursor: pointer;
}

.nav-link:hover, .nav-link-left:hover, .mobile-footer-links a:hover {
color: var(--text-color);
background-color: var(--accent-color);
}

.logo-button.active {
/* This class is now used to keep the logo visible */
}

/* === DESKTOP: Side Navs === */

.nav-stacked-right {
top: 0;
right: 0;
height: 100%;
z-index: 100;
display: none; /* Hidden by default */
flex-direction: row;
flex-shrink: 0; 
border-left: 1px solid var(--border-color);
background-color: var(--bg-color);
/* transition: border-color 0.3s ease, background-color 0.3s ease;
*/ /* REMOVED */
/* --- ADDED TRANSITION FOR BORDER --- */
transition: border-width 0.5s cubic-bezier(0.76, 0, 0.24, 1),
transform 0.8s cubic-bezier(0.23, 1, 0.32, 1) 0.5s;
/* MODIFIED: Added transform transition */

/* --- NEW: Initial state for animation --- */
transform: translateY(-100%);
}

/* --- ADDED RULE TO HIDE BORDER --- */
.nav-stacked-right.is-complete {
border-left-width: 0;
}

.nav-stacked-right .nav-link {
display: flex;
flex-direction: column;
justify-content: space-between;
align-items: center;
height: 100%;
width: 2rem;
padding: 2rem 0rem;
border-left: 1px solid var(--border-color);
transition: background-color 0.3s ease, /* Keep hover transition */
width 0.5s cubic-bezier(0.76, 0, 0.24, 1), 
padding 0.5s cubic-bezier(0.76, 0, 0.24, 1), 
opacity 0.3s ease,
border-width 0.5s cubic-bezier(0.76, 0, 0.24, 1);
overflow: hidden;
}

.nav-stacked-right .nav-link:first-child {
border-left: none;
}

.nav-stacked-right .nav-link.active {
width: 0;
padding-left: 0;
padding-right: 0;
opacity: 0;
border-left-width: 0;
}

.nav-stacked-right .nav-number, .nav-link-left .nav-number {
font-size: 0.875rem;
}

.nav-stacked-right .nav-text, .nav-link-left .nav-text {
font-size: 0.875rem;
letter-spacing: 0.1em;
text-transform: uppercase;
}

.vertical-text {
writing-mode: vertical-rl;
}

.nav-stacked-left .vertical-text {
transform: rotate(180deg);
}

.sidebar-left {
top: 0; 
left: 0;
padding: 1.5rem 0;
z-index: 10; 
display: none; /* Hidden by default */
flex-direction: column;
height: 100%;
justify-content: space-between;
align-items: center;
border-right: 1px solid var(--border-color);
width: 2rem;
flex-shrink: 0; 

background-color: var(--bg-color);
/* transition: border-color 0.3s ease, background-color 0.3s ease; */ /* REMOVED */

/* --- NEW: Added transition and initial state --- */
transform: translateY(-100%);
transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1) 0.5s;
}

/* === FIX: Reverted to original layout and added animation === */
.nav-stacked-left {
top: 0;
height: 100%;
z-index: 100;
display: none; /* Hidden by default (for mobile) */
flex-direction: row;
/* Corrected: Was 'column' */
border-right: 1px solid var(--border-color);
/* Added back */
flex-shrink: 0; 
background-color: var(--bg-color);
/* --- NEW: Added transition and initial state --- */
transform: translateY(-100%);
transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1) 0.5s;
}
/* === END FIX === */

.nav-link-left {
display: flex;
flex-direction: column;
justify-content: space-between;
align-items: center;
height: 100%;
padding: 2rem 0rem;
border-left: 1px solid var(--border-color);
transition: background-color 0.3s ease, /* Keep hover transition */
width 0.5s cubic-bezier(0.76, 0, 0.24, 1), 
padding 0.5s cubic-bezier(0.76, 0, 0.24, 1), 
opacity 0.3s ease,
border-width 0.5s cubic-bezier(0.76, 0, 0.24, 1);
overflow: hidden;
width: 0;
padding-left: 0;
padding-right: 0;
opacity: 0;
border-left-width: 0;
}

.nav-link-left:first-child { border-left: none;
}

.nav-link-left.active {
width: 2rem;
padding: 2rem 1rem;
opacity: 1;
border-left-width: 1px;
}
.nav-link-left.active:first-child { border-left-width: 0;
}

/* --- NEW: Desktop Nav Intro Animation --- */
.theme-wrapper.is-loaded .nav-stacked-right,
.theme-wrapper.is-loaded .sidebar-left, /* MODIFIED: Added .sidebar-left */
.theme-wrapper.is-loaded .nav-stacked-left {
transform: translateY(0);
}




/* === Icon Button Base Class === */
.icon-button {
width: 1.5rem;
height: 1.5rem;
border-radius: 50%;
cursor: pointer;
position: relative;
display: flex;
align-items: center;
justify-content: center;
/* transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, opacity 0.3s ease;
*/ /* REMOVED */
transition: opacity 0.3s ease, background-color 0.3s ease, color 0.3s ease;
/* ADDED back transitions */
}

.icon-button svg {
width: 1.25rem;
/* 20px */
height: 1.25rem;
/* 20px */
fill: currentColor;
transition: transform 0.3s ease;
}

/* === SVG Logo Button Styles === */
.logo-button {
width: 2rem;
height: 2rem;
border-radius: 50%;
cursor: pointer;
position: relative;
display: flex;
align-items: center;
justify-content: center;
border: 1px solid var(--text-color);
background-color: var(--bg-color);
/* Dark circle */
color: var(--text-color);
/* Light SVG */
/* transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, opacity 0.3s ease;
*/ /* REMOVED */
transition: opacity 0.3s ease;
}

.logo-button:hover {
opacity: 0.8;
background-color: var(--bg-color);
/* Keep bg on hover */
}

.logo-svg {
width: 1.25rem;
/* 20px */
height: 1.25rem;
/* 20px */
transition: transform 0.5s ease;
}

.logo-button:hover .logo-svg {
transform: scale(0.9);
}

/* SVG dot styles */
.dot {
position: absolute;
/color: var(--bg-color); 
width: 0.3rem; /* 5px */
height: 0.3rem;
/* 5px */
display: flex;
justify-content: center;
align-items: center;
background-color: var(--text-color);
/* Light dot */
border-radius: 50%;
transition: transform 0.5s ease;
}

.dot-bottom {
bottom: -0.1rem;
/* -2.5px */
left: 50%;
transform: translateX(-50%);
transform-origin: 0.15625rem -0.84375rem;
/* Corrected: 2.5px -13.5px */
}
.dot-left {
left: 0.0rem;
/* 1px */
top: 20%;
transform: translateY(-50%);
transform-origin: 0.9375rem 0.6rem;
/* 15px 9.6px */
}
.dot-right {
right: 0.0rem;
/* 1px */
top: 20%;
transform: translateY(-50%);
transform-origin: -0.8125rem 0.6rem;
/* -13px 9.6px */
}

.logo-button:hover .dot-bottom {
transform: translateX(-50%) rotate(360deg);
}
.logo-button:hover .dot-left {
transform: translateY(-50%) rotate(360deg);
}
.logo-button:hover .dot-right {
transform: translateY(-50%) rotate(360deg);
}


/* SVG icon styles */
.st0, .st3, .st5, .st7 {
stroke: currentColor;
stroke-miterlimit:10;
}
.st0 { stroke-width:10; }
.st3, .st7 { stroke-width:5;
}
.st7 { fill: none;
}
.st4, .st6 { fill: currentColor;
}
.st1 { display: none;
}
.st2, .st5, .st6 { display: inline;
}
/* === END SVG Logo Styles === */


/* Theme Toggle Button */
#theme-toggle {
/* Uses .icon-button */
border: 1px solid var(--text-color);
background-color: var(--text-color);
color: var(--bg-color);
}

.theme-toggle-label:hover #theme-toggle #theme-dot {
transform: scale(1.25);
}

#theme-dot {
width: 0.8rem;
height: 0.8rem;
border-radius: 50%;
background-color: currentColor;
transition: transform 0.3s ease;
}

/* Info Button */
.info-button {
/* Uses .icon-button */
border: 1px solid var(--text-color);
background-color: var(--text-color);
color: var(--bg-color);
}

.info-button:hover svg {
transform: scale(1.25);
}

.desktop-info-button {
writing-mode: vertical-rl;
margin-bottom: 1.5rem;
}

/* === NEW: Mobile Info Toggle Button === */
#mobile-info-toggle {
position: absolute;
top: 0.75rem;
left: 0.75rem;
z-index: 20;
display: none; /* Hidden by default (on desktop) */
}

#mobile-info-toggle.active {
background-color: var(--bg-color);
color: var(--text-color);
}
/* === END: Mobile Info Toggle Button === */

/* === NEW: Canvas Container Styles === */
#canvas-container {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 1; /* Sit behind the content */
opacity: 0;
transition: opacity 0.8s ease 0.2s; /* Fade in */
align-content: center;
justify-items: center;
}
#canvas-container.is-visible {
opacity: 1;
}
#canvas-container canvas {
display: block;
width: 100%;
height: 100%;
}

/* === Section 1: Hero === */

.section-1-wrapper {
display: flex;
flex-direction: column;
width: 100%;
position: relative; /* ADD THIS */
z-index: 2; /* ADD THIS (to sit on top of z-index: 1 canvas) */
}

.section-grid {
display: flex;
flex-direction: column;
width: 100%;
}

.text-column {
flex-grow: 1;
flex-basis: 50%;
display: none; /* Hiding text column */
flex-direction: column;
justify-content: center;
padding-top: 2rem;
}

.hero-text-large {
font-size: 1.5rem;
line-height: 1.6;
font-weight: 300;
}

.text-divider {
margin-top: 2rem;
padding-top: 2rem;
border-top: 1px solid var(--border-color);
font-size: 0.875rem;
line-height: 1.6;
color: var(--text-muted-color);
/* transition: border-color 0.3s ease, color 0.3s ease;
*/ /* REMOVED */
}

.brand-name {
color: var(--text-color);
font-weight: 500;
/* transition: color 0.3s ease; */ /* REMOVED */
}

/* === Sections 2-5 (Shared Styles) === */
.section-title-combined {
font-size: 1.875rem;
line-height: 1.4;
font-weight: 400;
display: flex;
flex-direction: column;
align-items: flex-start;
}

.section-number-inline {
font-size: 0.875rem;
color: var(--text-muted-color);
background-color: var(--accent-color);
padding: 0.25rem 0.75rem;
border-radius: 99px;
margin-bottom: 1rem;
/* transition: background-color 0.3s ease, color 0.3s ease;
*/ /* REMOVED */
}

.section-description {
font-size: 1.125rem;
line-height: 1.7;
color: var(--text-muted-color);
margin-top: 1.5rem;
max-width: 65ch;
}

.center-section {
align-items: center;
justify-content: center;
text-align: left;
}

/* === Marquee Styles === */
.marquee-container {
width: 100%;
padding: 0.1rem 0;
background-color: var(--bg-color); /* Match section bg */
border-top: 1px solid var(--border-color);
border-bottom: 1px solid var(--border-color);
overflow: hidden;
white-space: nowrap;
margin-top: 20rem;
position: absolute;
z-index: 5;
transform: translateX(100%) translateZ(0);
transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
align-self: anchor-center;
backface-visibility: hidden;
will-change: transform;  
touch-action: manipulation;
user-select: none;
-webkit-user-select: none;
/* ADD THESE: */
perspective: 1000px;
-webkit-perspective: 1000px;
transform-style: preserve-3d;
}

/* --- NEW: Marquee Animation Trigger --- */
section.is-active .marquee-container {
transform: translateX(0) translateZ(0);
transition-delay: 0.5s; /* Stagger after canvas fade-in */
}


/.marquee-content-wrapper {
display: flex;
width: fit-content; 
animation: marquee-scroll 100s linear infinite;
backface-visibility: hidden;
touch-action: manipulation;
user-select: none;
-webkit-user-select: none;
}

.marquee-content-wrapper {
display: flex;
width: max-content; /* Changed from fit-content to prevent sub-pixel calculation errors */
animation: marquee-scroll 100s linear infinite;
backface-visibility: hidden;
-webkit-backface-visibility: hidden;
will-change: transform; /* Tells browser to keep this in GPU memory */
transform-style: preserve-3d; /* Prevents flattening/flashing */
}

.marquee-content {
display: flex;
white-space: nowrap; 
flex-shrink: 0;
touch-action: manipulation;
user-select: none;
-webkit-user-select: none;

}

.marquee-content span {
font-size: 5rem;
font-weight: 500;
text-transform: uppercase;
letter-spacing: 0.1em;
color: var(--text-color);
/* transition: color 0.3s ease;
*/ /* REMOVED */
padding-right: 2rem;
display: inline-block;
touch-action: manipulation;
user-select: none;
-webkit-user-select: none;

}


/* === MODAL STYLES (THEMED) === */
#modal-container-side {
position: fixed;
/* Default for mobile */
width: 100%;
height: 100%;
top: 0;
left: 0;
z-index: 200;
pointer-events: none;
opacity: 0; 
}

#modal-container-side.visible {
pointer-events: auto;
animation: containerFadeIn 0.5s cubic-bezier(0.165, 0.840, 0.440, 1.000) forwards;
}

#modal-container-side.visible.out {
animation: containerFadeOut 0.5s cubic-bezier(0.165, 0.840, 0.440, 1.000) forwards;
}

#modal-container-side.visible .modal-content {
opacity: 0;
animation: fadeIn 0.5s cubic-bezier(0.165, 0.840, 0.440, 1.000) forwards;
}

#modal-container-side.visible.out .modal-content {
animation: fadeOut 0.4s cubic-bezier(0.165, 0.840, 0.440, 1.000) forwards;
}

.modal-background {
display: flex;
justify-content: center;
align-items: center;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.75);
}

.modal-content {
background: var(--bg-color);
color: var(--text-color);
display: flex; 
width: 80vw;
height: 70vh;
max-width: 1200px;
border-radius: 8px;
font-weight: 300;
position: relative;
box-shadow: 0 10px 30px rgba(0,0,0,0.2);
overflow: hidden; 
}

.modal-panel {
width: 50%;
/padding: 25px;
overflow-y: auto;
}

.modal-panel.left {
border-right: 1px solid var(--border-color);
}

.modal-panel h2 {
font-size: 25px;
/line-height: 25px;
margin-bottom: 15px;
color: var(--text-color);
}

.modal-panel p {
font-size: 1.25rem;
color: var(--text-color);
font-weight: 500;
/text-align: center;   
letter-spacing: 1px;  
}

.ls{    
border-bottom: 1px solid var(--border-color);
padding-bottom: 10px;
padding: 25px;

}

.bb {
width: 100%;
height: 100%;
position: relative;
/z-index: 1;
overflow: hidden;
/clip-path: polygon(2% 0, 100% 0, 100% 80%, 90% 100%, 0 100%, 0 65%, 2% 60%);
}



.bb img {
width: 100%;
height: 100%;
object-fit: contain;
/clip-path: inherit;
/background: grey; 
/transition: transform 0.4s ease 0.1s; /* delay image scale */
}



/* --- KEYFRAMES --- */
/* ---  
@keyframes marquee-scroll {
0% { transform: translateX(0);
}
100% { transform: translateX(-50%);
}
}
--- */
@keyframes marquee-scroll {
0% { 
transform: translate3d(0, 0, 0); 
}
100% { 
transform: translate3d(-50%, 0, 0); 
}
}

@keyframes containerFadeIn {
0% { opacity: 0;
}
100% { opacity: 1;
}
}
@keyframes containerFadeOut {
0% { opacity: 1;
}
100% { opacity: 0;
}
}
@keyframes fadeIn {
0% { opacity: 0;
transform: translateY(10px); }
100% { opacity: 1; transform: translateY(0);
}
}
@keyframes fadeOut {
0% { opacity: 1;
transform: translateY(0); }
100% { opacity: 0; transform: translateY(10px);
}
}
/* === END MODAL STYLES === */

/* === Section Z-Indexes === */
#section-1 { z-index: 10; }
#section-2 { z-index: 12; }
#section-3 { z-index: 13; }
#section-4 { z-index: 14; }


/*WORK///////////////////////////*/

#section-2 .section-content {
width: 100%;
}

:root {
--left-width: 17.5%;
/* --right-width: 70%;
<-- This is now controlled by portfolio-content-area */
}

.portfolio-main {
display: grid;
/* UPDATED: Grid template now has two columns: nav and content area */
grid-template-columns: var(--left-width) 1fr;
min-height: 100vh;
height: 100vh;
}

/* NEW: This wrapper holds the gallery and the new info section */
.portfolio-content-area {
display: grid;
grid-template-columns: 80% 20%; /* This splits the right-hand side into gallery (75%) and info (25%) */
height: 100%;
overflow: hidden;
}

.portfolio-nav {
display: flex;
flex-direction: column;
justify-content: center;
padding: 0;
gap: 0;
position: relative;
}

.category-group {
border: 1px solid var(--border-color);
}

.category-group:last-of-type {
border: 1px solid var(--border-color);
}

.section-btn {
background-color: var(--bg-color);
color: var(--text-color);
border: none;
padding: 0rem;
font-size: 2.5vw;
cursor: pointer;
transition: all 0.3s ease;
text-align: left;
text-transform: uppercase;
width: 100%;
position: relative;
overflow: hidden;
}

.section-btn::before {
content: '';
position: absolute;
left: 0;
top: 0;
height: 100%;
width: 0%;
background: var(--text-color);
transition: width 0.1s linear;
z-index: 0;
}

.section-btn span {
position: relative;
z-index: 1;
background: linear-gradient(to right, var(--text-color) var(--progress, 0%), var(--text-color) var(--progress, 0%), var(--text-color) 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
padding: 0rem 2rem;
display: flex;
align-items: center;
width: 100%;
height: 100%;
}

.section-btn:hover {
background: var(--accent-color);
transform: translateX(10px);
}

.section-btn.active {
background: var(--accent-color);
}

.section-btn.active::before {
width: var(--progress, 0%);
}

.section-btn.active span {
background: linear-gradient(
to right, 
var(--bg-color) var(--progress, 0%), 
var(--text-color) var(--progress, 0%), 
var(--text-color) 100%
);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}

.portfolio-gallery {
position: relative;
overflow: hidden;
border: 1px solid var(--border-color);
border-right: 0;
background-color: var(--bg-color);
color: var(--text-color);
/* height: 100%; */ /* <-- REMOVED */
border-top: none;
border-bottom: none;

}

.portfolio-img {
width: 100%;
height: 100%;
object-fit: contain;
}  


.scroller {
height: 100%;
width: 100%; 
display: flex;
align-items: center;
overscroll-behavior: none;
overflow-x: scroll;
overflow-y: hidden;
touch-action: pan-x; /* <-- ADDED */
scroll-snap-type: x mandatory;
scroll-behavior: smooth;
padding-top: 2rem;
padding-bottom: 2rem;
padding-left: 15px; /* CHANGED: Was 15px */
padding-right: 15px; /* CHANGED: Was 15px */
opacity: 1;
transform: translateX(0);
transition: opacity 0.4s ease, transform 0.4s ease;
position: absolute;
inset: 0;
opacity: 0;
transform: translateX(50px);
transition: opacity 0.4s ease, transform 0.4s ease;
pointer-events: none;
}

.scroller.active {
opacity: 1;
transform: translateX(0);
pointer-events: auto;
z-index: 10;
}

.scroller:not(.active) {
opacity: 0;
transform: translateX(-50px);
z-index: 1;
}

.scroller::-webkit-scrollbar {
display: none;
}

.scroller {
-ms-overflow-style: none;
scrollbar-width: none;
}

.portfolio-item {
display: flex;
justify-content: center;
align-items: center;
width: 100%;
max-width: 62.5vh;
/max-width: 50vh;
/aspect-ratio: 4/5;
margin-right: 2rem;
margin-left: 0;
margin-top: auto;
margin-bottom: auto;
background-color: var(--bg-color);
color: var(--text-color);
border: 1px solid var(--border-color);
scroll-snap-align: center;
font-size: 1.5rem;
border-radius: 20px;
position: relative;
overflow: hidden;
transition: transform 0.3s ease, box-shadow 0.3s ease;
flex-shrink: 0;
cursor: pointer;
}

/.portfolio-item:hover {
transform: scale(1.02);
/box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}


/* === NEW: Info Section === */
.portfolio-info {
position: relative;
height: 100%;
overflow: hidden; /* Hide overflowing content */
border: 1px solid var(--border-color);
border-left: 1px solid var(--border-color);
align-content: center;
border-top: none;
border-bottom: none;
}

.info-content {
position: absolute;
inset: 0;
padding: 1.25rem;
opacity: 0;
transform: translateY(20px);
transition: opacity 0.4s ease, transform 0.4s ease;
pointer-events: none;
overflow-y: auto;/* Allow info to scroll if it's long */
align-content: center;    
}

.info-content.active {
opacity: 1;
transform: translateY(0);
pointer-events: auto;
position: relative; /* Override absolute */
}

.info-content h3 {
font-size: 1.5rem;
font-weight: 600;
margin-bottom: 1rem;
text-transform: uppercase;
}

.info-content p {
font-size: 1rem;
line-height: 1.6;
color: var(--text-color);
margin-bottom: 1rem;
}
/* === End Info Section === */


/* === NEW: Modal / Lightbox === */
.portfolio-modal {
position: fixed;
inset: 0;
z-index: 9998;
background-color: rgba(0, 0, 0, 0.7);
-webkit-backdrop-filter: blur(10px);
backdrop-filter: blur(10px);
opacity: 0;
pointer-events: none;
transition: opacity 0.3s ease;
display: flex;
justify-content: center;
align-items: center;
padding: 2rem;
}

.portfolio-modal.active {
opacity: 1;
pointer-events: auto;
}

.modal-gall {
max-width: 90%;
max-height: 90%;
width: auto;
height: auto;
border-radius: 20px;
overflow: hidden;
border: 1px solid var(--border-color);
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
transform: scale(0.95);
opacity: 0;
transition: transform 0.3s ease, opacity 0.3s ease;
cursor: pointer;
}

.portfolio-modal.active .modal-gall {
transform: scale(1);
opacity: 1;
}

.modal-gall-inner {
/* This will hold the cloned item's content */
display: flex;
justify-content: center;
align-items: center;
font-size: 2rem;
color: var(--text-color);
background-color: var(--bg-color);
/* Set a large size, aspect-ratio will constrain it */
width: 80vw;
height: 80vh;
max-width: 1000px;
aspect-ratio: 4/5;
}
/* === End Modal / Lightbox === */


/*WORK END///////////////////////////*/


/*SERVICES///////////////////////////*/

#section-3 .section-content {
width: 100%;
}

.container {
display: flex;
width: 100vw;
height: 100vh;
}

.grid-side {
width: 50%;
display: flex;
flex-direction: column;
border-right: 1px solid #4a4a4a;
overflow-y: auto;
}

.grid-item {
flex: 1;
min-height: calc(100vh / 8);
border-bottom: 1px solid #4a4a4a;
position: relative;
padding: 2rem;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
overflow: hidden;
}

.grid-item:last-child {
border-bottom: none;
}

.grid-item:hover {
background-color: #1a1a1a;
}

.grid-item-bg {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
object-fit: cover;
opacity: 0;
transition: opacity 0.5s ease;
z-index: 1;
}

.grid-item:hover .grid-item-bg {
opacity: 0.3;
}

.grid-item:hover .item-title{
color: white;
}

.circle {
width: 1rem;
height: 1rem;
border: 1px solid #888;
border-radius: 50%;
transition: all 0.3s ease;
z-index: 2;
margin-right: 1.5rem;
}

.grid-item:hover .circle {
border-color: #ffffff;
background-color: #ffffff;
}

.item-title {
font-size: 1.5rem;
font-weight: 500;
position: relative;
z-index: 2;
}

.grid-item-content {
display: flex;
align-items: center;
justify-content: center;
justify-content: space-between;
width: 100%;
height: 100%;
}

.display-side {
width: 50%;
display: flex;
align-items: center;
justify-content: center;
padding: 3rem;
position: relative;
overflow: hidden;
}

.service-content {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
display: flex;
align-items: center;
justify-content: center;
/padding: 3rem;
padding: 7rem;    
opacity: 0;
transition: opacity 0.5s ease;
pointer-events: none;
margin-left: -3.5rem;    
}

.service-content h2{
padding-bottom:5px;    
}

.service-content[data-service="default"] {
opacity: 1;
pointer-events: auto;
}


/*SERVICES END///////////////////////////*/


/*INQUIRY///////////////////////////*/

#section-4 { /* NEW: Remove padding from section 4 so its content can be 100vh */
padding: 0 !important;
}

/* NEW: Make section-content fill the section and be a positioning context */
#section-4 .section-content {
width: 100%;
height: 100%;
position: relative;
display: flex;
align-items: center;
justify-content: center;
}

.text-container {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
display: inline-block;
z-index: 1; /* Ensure text is above canvas */
text-align: center;
}

.copyable-text {
background-color: var(--bg-color);
color: var(--text-color);
border: 2px solid var(--border-color);
border-radius: 5px;
padding: 20px 30px;
font-size: 35px;
cursor: pointer;
user-select: none;
transition: all 0.3s ease;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
position: relative;
overflow: hidden;
}

.copyable-text::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
transition: left 0.5s;
}

.copyable-text:hover::before {
left: 100%;
}

.copyable-text:hover {
transform: translateY(-2px);
box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

.copy-circle {
position: absolute;
top: -50px;
left: 50%;
width: 60px;
height: 60px;
background-color: var(--bg-color);
color: var(--text-color);
border: 1px solid var(--border-color);
box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-size: 12px;
text-transform: uppercase;
cursor: pointer;
opacity: 0;
transform: translateX(-50%) scale(0.8);
transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55), 
background-color 0.3s ease, 
color 0.3s ease, 
border-color 0.3s ease,
box-shadow 0.3s ease;
z-index: 10; /* Ensure this is above .text-container */
pointer-events: none;
}

.copy-circle::before {
content: '';
position: absolute;
top: -2px;
left: -2px;
right: -2px;
bottom: -2px;
background:  var(--bg-color);
border-radius: 50%;
z-index: -1;
opacity: 0;
transition: opacity 0.3s ease, background-color 0.3s ease;
}

.text-container:hover .copy-circle,
.copy-circle:hover {
opacity: 1;
transform: translateX(-50%) scale(1);
top: -70px;
pointer-events: auto;
}

.copy-circle:hover {
transform: translateX(-50%) scale(1.1);
box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
top: -70px;
}

.copy-circle:hover::before {
opacity: 1;
}

.copy-circle:active {
transform: translateX(-50%) scale(0.95);
}

.copy-circle.copied {
background: var(--text-color);
color: var(--bg-color);
box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.copy-circle.copied::before {
background: var(--accent-color);
}

#breathingGrid {
/* NEW: Make canvas fill its parent (.section-content) and sit behind */
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 0; /* Behind .text-container */
}

/*INQUIRY END///////////////////////////*/

/* === DESKTOP  === */

@media (min-width: 1025px) and (pointer: fine) and (hover: hover) {
  
.theme-wrapper {
overflow: hidden;
scroll-snap-type: none;
display: flex;
flex-direction: row;
}

main {
overflow: hidden;
flex-grow: 1;
height: 100vh;
width: 100%;
}

section {
position: absolute;
top: 0; 
left: 0; 
height: 100%;
width: 100%;
/* UPDATED: Removed background-color transition */
transition: transform 0.8s cubic-bezier(0.76, 0, 0.24, 1);
transform: translateX(100%); 
padding: 4rem 0rem;
}

.logo-button{ transform: scale(0.85); }

/* Show/Hide UI */
.mobile-footer {
display: none;
}
.nav-stacked-right, .sidebar-left, .nav-stacked-left {
display: flex;
}

  
/* Section 1 Layout */
  
#section-1 {
transform: translateX(0);
}

.section-grid {
flex-direction: row;
align-items: stretch;
}
  
.section-1-wrapper {
height: auto;
justify-content: center;
}

.text-column {
padding-top: 0;
padding-left: 2rem;
}

/* Typography */
.section-title-combined {
font-size: 2.5rem;
}


/* SECTION 2 */

.portfolio-info {
border-right: none;
}

  
/* SECTION 3 */

.item-title br{display:none}    

  
.grid-side:hover ~ .display-side [data-service="default"] {
opacity: 0;
pointer-events: none;
}
.grid-side:has([data-service="motion"]:hover) ~ .display-side [data-service="motion"] ,
.grid-side:has([data-service="animation"]:hover) ~ .display-side [data-service="animation"] ,    
.grid-side:has([data-service="ux"]:hover) ~ .display-side [data-service="ux"],
.grid-side:has([data-service="branding"]:hover) ~ .display-side [data-service="branding"],
.grid-side:has([data-service="development"]:hover) ~ .display-side [data-service="development"],
.grid-side:has([data-service="strategy"]:hover) ~ .display-side [data-service="strategy"],
.grid-side:has([data-service="photography"]:hover) ~ .display-side [data-service="photography"],
.grid-side:has([data-service="art"]:hover) ~ .display-side [data-service="art"]
{
opacity: 1;
pointer-events: auto;
}



  
/*  Modal  */
  
#modal-container-side {
position: absolute;
z-index: 200;/* Stay on top of sections */

}

.modal-content {
width: 100%;
height: 100%;
max-width: none;
border-radius: 0;
box-shadow: none;
}

.modal-panel.left {
align-content: center;
}  

/.modal-panel.right{
bottom: -5px;
position: fixed;
right: 0;

}   

.modal-panel.right {
bottom: -5px;
position: fixed;
right: -70px;
z-index: -1;
}

.modal-panel {
width: 55%;
}

.ls:first-child{
border-top: 1px solid var(--border-color);
}

.lik:hover {opacity:0.75}  


/.bb img {
position: relative;
bottom: -5px;
}

  
  
}


/* === MOBILE-ETC === */
@media
/* tablet Landscape  */
screen and (min-width: 768px) and (max-width: 1368px) and (orientation: landscape) and (hover: none) and (pointer: coarse) ,
/* mobile/tablet */
(max-width:1024px),
/* Phone Landscape  */
(max-width: 
1024px) and (orientation: landscape) and (max-height: 500px) {



/* === MOBILE: Header & Footer === */

.mobile-footer {
position: fixed;
/position: sticky;
bottom: 0;
left: 0;
width: 100%;
z-index: 100;
display: flex;
flex-direction: column;
background-color: var(--bg-color);
border-top: 1px solid var(--border-color);
/* transition: background-color 0.3s ease, border-color 0.3s ease; */ /* REMOVED */
/padding-bottom: env(safe-area-inset-bottom);
}

.mobile-footer-top {
display: grid;
grid-template-columns: 1fr 1fr 1fr; 
align-items: center;
padding: 1rem 1.5rem;
border-bottom: 1px solid var(--border-color);
}

.mobile-footer-top .info-button {
justify-self: start;
}
.mobile-footer-top .logo-button { 
justify-self: center;
}
.mobile-footer-top .theme-toggle-label {
justify-self: end;
}

/.mobile-footer-links {
display: grid;
grid-template-columns: 1fr 1fr 1fr; 
}

.mobile-footer-links a {
text-align: center;
padding: 1rem 0.5rem;
font-size: 0.75rem;
text-transform: uppercase;
letter-spacing: 0.1em;
border-left: 1px solid var(--border-color);
transition: background-color 0.3s ease, opacity 0.3s ease; /* MODIFIED: Added opacity */
/* Keep hover transition */
color: var(--text-muted-color);
opacity: 0.5;	
}



.mobile-footer-links a:first-child {
border-left: none;
}

.mobile-footer-links a.active {
color: var(--text-color);
/background-color: var(--accent-color);
opacity: 1;
}

/.mobile-footer-links a:third-child {
opacity: 1;
}

.nav-link.logo-button{
opacity: 1;
padding: 0;
margin: 0;
font-size: unset;
letter-spacing: unset;	
background-color: inherit;    
}	

/* === NEW: Mobile Work Nav (Section 2) === */
#mobile-work-nav {
/* display: none; */ /* MODIFIED: No longer using display */
overflow: hidden;
max-height: 0;
transform: translateY(100%); /* NEW: Slide-in/out styles */
transition: max-height 0.4s cubic-bezier(0.23, 1, 0.32, 1), 
transform 0.4s cubic-bezier(0.23, 1, 0.32, 1),
border-width 0.1s linear;
border-bottom: 0px solid var(--border-color); /* Start with no border */
display: grid;
/* ADDED: Keep as grid */
grid-template-columns: 1fr 1fr 1fr;
/* ADDED: Keep as grid */
}


.mobile-footer.section-2-active #mobile-work-nav {
/* NEW: Slide-in styles */
max-height: 60px;
/* Adjust as needed for padding */
transform: translateY(0);
border-bottom-width: 1px;
transition-delay: 0s, 0s, 0.3s; /* Delay border appearing */
}

/* Styling for the new work-nav links */
.mobile-work-nav-link {
text-align: center;
padding: 0.75rem 0.5rem;
font-size: 0.75rem;
text-transform: uppercase;
letter-spacing: 0.1em;
border-left: 1px solid var(--border-color);
transition: background-color 0.3s ease;
color: var(--text-muted-color);
cursor: pointer;
/* === NEW: Added for progress bar === */
position: relative;
overflow: hidden;
}
.mobile-work-nav-link:first-child {
border-left: none;
}
.mobile-work-nav-link.active,
.mobile-work-nav-link:hover {
color: var(--text-color);
background-color: var(--accent-color);
}

/* === NEW: Progress bar for mobile link === */
.mobile-work-nav-link.active::before {
content: '';
position: absolute;
left: 0;
top: 0;
height: 100%;
width: var(--progress, 0%);
/* Controlled by JS */
background: var(--text-color);
transition: width 0.1s linear;
z-index: 0;
}

/* === NEW: Span to allow text to sit above bar === */
.mobile-work-nav-link span {
position: relative;
z-index: 1;
background: linear-gradient(to right, var(--text-color) var(--progress, 0%), var(--text-color) var(--progress, 0%), var(--text-color) 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
/* Force span to take up full button area for alignment */
display: flex;
align-items: center;
justify-content: center;
width: 100%;
height: 100%;
}

/* === NEW: Active state text color change === */
.mobile-work-nav-link.active span {
background: linear-gradient(
to right, 
var(--bg-color) var(--progress, 0%), 
var(--text-color) var(--progress, 0%), 
var(--text-color) 100%
);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}

/* === END: Mobile Work Nav === */

/* === START: MOBILE LAYOUT FIX === */
.mobile-nav {
display: flex;
flex-direction: column;
height: 100svh; /* Make wrapper fill the viewport */
/height: 100%;
}

.theme-wrapper {
flex-grow: 1;
/* Make content area fill available space */
height: auto;
/height: 100dvh;
}

.mobile-footer {
/position: static;
position: relative;
flex-shrink: 0;
}
/* === END: MOBILE LAYOUT FIX === */

/* === NEW: Make main/section fill the theme-wrapper === */
main {
height: 100%;
/position: static; /* <-- MODIFICATION: Allow modal to position to theme-wrapper */
}

body {
overflow: hidden;
}

section { /* MODIFIED: Set height to 100% of container, restored 2rem top/bottom padding */
padding: 2rem 0rem ;
align-items: center;
height: 100%; /* NEW: Make section height fill theme-wrapper */
}

.hero-text-large {
font-size: 1.875rem;
}

.section-title-combined {
font-size: 2.5rem;
}

.modal-panel {
width: 100%;
height: 50%;
}

.modal-panel.left {
border-right: none;
/border-bottom: 1px solid var(--border-color);
align-content: center;    
}

.marquee-content span {
font-size: 1.5rem!important;
}

.mobile-footer-top {
padding: 0.2rem 1.5rem!important;
border-bottom:none!important;
}

.mobile-footer-links a {
border-left: none!important;
padding: 0.75rem 0.5rem;
/padding: 0.75rem;
color: var(--text-color)!important;
}

.icon-button {
width: 1.5rem!important;
height: 1.5rem!important;
/position: absolute;
/bottom: 45px;
position: fixed;
bottom: 87px;
right: 5px;
}

.mobile-footer-links {
display: grid;
grid-template-columns: repeat(5, 1fr);
justify-content: center;
align-items: center;
justify-items: center;
/height: 100svh;
/height: 100%;

}

.nav-link:hover, .nav-link-left:hover, .mobile-footer-links a:hover {
color: var(--text-color);
background-color: transparent;
}

.nav-link.logo-button.active{
background: none;
}

.marquee-container {
margin-top: 25rem;
}

.marquee-content-wrapper {
animation: marquee-scroll 80s linear infinite;

}

.theme-toggle-label:hover #theme-toggle #theme-dot {
transform: none;
}




/* === MODAL STYLING UPDATES FOR MOBILE === */

.right{
display: flex;
align-items: flex-end;
}

/.bb {
width: 100%;
height: 80%;
position: relative;
overflow: hidden;
bottom: 0;

}
.modal-panel {
width: 100%;
height: 100%;
}

.modal-content {
/flex-direction: column;
width: 100vw;
/* CHANGED: Make modal content fill the available space in .mobile-nav */
height: 100%; 
margin-bottom: 0; /* REMOVED margin-bottom */
border-radius: 0; /* REMOVED border-radius */
box-shadow: none; /* REMOVED box-shadow */
}


.modal-panel p {
font-size: smaller;
/text-align: end;
text-align: left;    
}

.ls {
/padding: 15px;
padding: 10px 10px 10px 5px;  
border-bottom: none;  
}

.bb {
width: 130%;
height: 120%;
position: absolute;
overflow: hidden;
top: 0;
left: 7.5%;
z-index: -1;
}



.modal-background {
background: rgba(0, 0, 0, 0);
background-color: var(--bg-color);
align-items: stretch; /* CHANGED: Don't center, fill height */
justify-content: stretch; /* CHANGED: Don't center, fill width */
}

#modal-container-side {
/* CHANGED: Make modal container part of the .mobile-nav flow */
position: absolute; /* Position relative to .theme-wrapper */
top: 0;
left: 0;
height: 100%; /* Fill the .theme-wrapper container */
z-index: 200; /* MODIFIED: Ensure it's on top of sections */
}
/* === END MODAL STYLING UPDATES === */

/* === WORK SECTION 2=== */

#section-2{
/height:unset;
/height: 100vh;
padding:0;
}

#section-2 .section-content{
height: 100%;
}

/.portfolio-item {
margin-right: 5.5rem;
max-width: 100%;
/height:90%;
height: auto;
aspect-ratio: auto;  
transform: scale(0.925);
border: 2.5px solid var(--border-color);  
}

.portfolio-item {
width: 80vw; /* Standard width ensures centering works correctly */
max-width: 80vw;
margin-right: 1.5rem; /* Clean consistent gap */
margin-left: 0;
height: auto;
aspect-ratio: auto;  
transform: none; /* Remove scale, handle size via width above */
border: 2.5px solid var(--border-color);  
}


/.portfolio-item:last-child {
margin-right: 0;
margin-left: 5.5rem;    
}


/* 2. Remove the weird margins on the last item */
.portfolio-item:last-child {
margin-right: 0;
margin-left: 0;    
}

.portfolio-item:hover {
transform: none;
box-shadow: none;
}


.portfolio-main {
grid-template-columns: 1fr;
/* Content (1fr) on top, Nav (auto) on bottom */
grid-template-rows: 1fr auto;
/height: 100vh;
overflow: hidden;
height: 100%;
min-height: auto;
}

/* NEW: Content area takes the top spot and stacks its children */
.portfolio-content-area {
order: 1;
/* Show this first (top) */
display: flex;
flex-direction: column;
height: 100%; /* Take the 1fr space */
overflow: hidden;
grid-template-columns: 1fr; /* Override desktop grid */
position: relative;
/* ADDED: For absolute positioning of info panel */
}

.portfolio-nav {
display: flex;
flex-direction: row;
order: 2; /* Show this second (bottom) */
gap: 0;
justify-content: stretch;
padding-bottom: env(safe-area-inset-bottom, 0);
/display:none; 
}

.category-group {
flex: 1;
/border-top: 1px solid var(--border-color);
border-bottom: none;
border-top: none;
border:none;
}

/.category-group:first-of-type {
border-left: none;
}

/.category-group:not(:first-of-type) {
border-left: 1px solid var(--border-color);
}

.category-group:last-of-type {
/border-bottom: none;
/border-top: none;
border:none;

}

.section-btn {
font-size: 0.75rem;
padding: 0.5rem;
height: 100%;
display: flex;
align-items: center;
justify-content: center;
text-align: center;
font-weight: normal;
letter-spacing: 0.1em;
background-color: inherit; 
}

.section-btn.active {
background: none;
}

.section-btn span {
padding: 0;
justify-content: center; /* Remove desktop padding */
opacity: 0.5;

}

.section-btn.active span {
opacity: 1;
}


.section-btn:hover {
transform: none;
}

/* Gallery takes 60% height, Info takes 40% */
.portfolio-gallery {
padding: 0;
order: 2; /* UPDATED: Set order to 2 */
height: auto; /* UPDATED: Let flexbox control height */
flex-grow: 1;
flex-shrink: 1;
border: none;
width: 100%;
position: relative;
overflow: hidden;
}

/.scroller {
height: 100%;
width: 100%; 
touch-action: auto;
overscroll-behavior: auto;
/padding-left: calc(50vw - 25vh); /* Center items and show one at a time */
/padding-right: calc(50vw - 25vh); /* Centers items based on max-width */
scroll-padding: 0 calc(50vw - 21vh);
padding-top: 0rem;
padding-bottom: 1.5rem;
}

/* 3. Add padding to scroller so first/last items can reach the center */
.scroller {
height: 100%;
width: 100%; 
touch-action: auto;
overscroll-behavior: auto;
/* Calculation: (Viewport Width - Item Width) / 2 */
/* (100vw - 80vw) / 2 = 10vw padding on each side */
padding-left: 10vw; 
padding-right: 10vw;
padding-top: 0rem;
padding-bottom: 1.5rem;
display: flex; /* Ensure flex behavior */
align-items: center; /* Vertically center */
}


/* NEW: Style info section for mobile */
.portfolio-info {
position: absolute;
bottom: 0;
left: 0;
width: 100%;
height: 70%; /* Height of the panel when open */
z-index: 40; /* Above button (20) and scrollers (10) */
background-color: var(--bg-color);
border-top: 1px solid var(--border-color);
overflow: hidden; /* Hides its own content overflow */
transform: translateY(0);
transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
order: 3; /* UPDATED: Set order to 3 to not interfere with gallery */
max-height: none;
flex-grow: 0;
flex-shrink: 0;
border-bottom: none;
align-content: unset;    

}

/* === NEW: Collapsed state for info panel === */
.portfolio-info.info-collapsed {
/* This is the "hidden" state */
transform: translateY(100%);
/* Slides it down, off-screen */
border-top-width: 0;
transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1),
border-width 0.1s linear 0.4s;
/* Clear old properties */
max-height: none !important;
border-bottom-width: 0;
}
/* === END: Collapsed state === */

/* === NEW: Mobile Info Toggle Button Styles === */
#mobile-info-toggle {
display: flex;
width: 1.75rem;
height: 1.75rem;
bottom: 0.75rem;
top: auto; 
left: 0.75rem;
z-index: 50; /* ADDED: Ensures button is above info panel (z-index: 40) */
}

#mobile-info-toggle svg {
width: 1.2rem;
height: 1.2rem;
}
/* === END: Mobile Info Toggle Button Styles === */


.info-content {
padding: 1rem; /* Padding on the content itself */
position: absolute;
inset: 0;
opacity: 0;
transform: translateY(20px);
transition: opacity 0.4s ease, transform 0.4s ease;
pointer-events: none;
align-content: unset;    
}

.info-content.active {
opacity: 1;
transform: translateY(0);
pointer-events: auto;
position: relative; /* Override absolute */
height: 100%; /* Ensure it fills the space */
overflow-y: auto; /* Allow content to scroll if it's too long */
}

.info-content h3 {
/font-size: 1.0rem;
margin-bottom: 0.2rem;
text-align: center;
}

.info-content p {
/font-size: 0.8rem;
line-height: 1.2;
/margin-bottom: 0.5rem;
}

.info-button:hover svg {
transform: none;
}

.modal-gall-inner {
width: 100%;
height: 100%;
max-width: unset;
aspect-ratio: auto;
}

.modal-gall {
max-width: 100%;
max-height: 100%;
}

/* === WORK SECTION 2 END=== */

/* === SERVICES SECTION 3=== */


#section-3 .section-content {
height: 100%;
}
#section-3 {padding:0}

.container {
height: 100%;
}

.grid-item.active {
background-color: #1a1a1a;
}
.grid-item.active .grid-item-bg {
opacity: 0.3;
}
.grid-item.active .circle {
border-color: #ffffff;
background-color: var(--text-color);
}
.service-content.active {
opacity: 1 !important;
pointer-events: auto;
}
/* Hide default ONLY when a mobile tap has activated something */
body.mobile-has-active [data-service="default"] {
opacity: 0 !important;
pointer-events: none !important;
}

.grid-item { 
padding: 0rem 0rem 0rem 0.75rem;
min-height: calc(100svh / 9.333);
}
.circle { width: 0.875rem; height: 0.875rem; margin-right: 0.5rem; }
.item-title { font-size: 0.9rem; }

.service-content h2 { 
font-size: clamp(1.5rem, 5vw, 2rem);
word-wrap: break-word;
overflow-wrap: break-word;
}

.service-content p { 
font-size: clamp(0.875rem, 3vw, 1rem);
word-wrap: break-word;
overflow-wrap: break-word;
}

.display-side { 
padding: 2rem; 
width: 60%;
}

.grid-item-content {
justify-content: flex-start;
}

.service-content {
padding: 1rem;
margin-left: 0;    
}
.grid-side {
width: 40%;
}

/* === SERVICES SECTION 3=== */

/* === INQUIRY SECTION 4=== */

.copyable-text {
font-size: 24px;
padding: 15px 20px;
}

.copy-circle {
width: 50px;
height: 50px;
font-size: 10px;
top: -40px;
}

/* === INQUIRY SECTION 4 END === */


}



</style>


<input type="checkbox" id="theme-checkbox">

<div class="mobile-nav">

<div class="theme-wrapper">

<div class="sidebar-left">
<a href="#" 
data-navlink="section-1" class="nav-link logo-button active">
<svg class="logo-svg" viewBox="0 0 712.7 712" xmlns="http://www.w3.org/2000/svg">
<polyline class="st0" points="640,628.1 640,443.7 645.9,427.9 645.9,315.1 640,300.3 640,88.5 648.1,71.8 655.2,57.1 685.6,57.1 	707.7,68.8 707.7,82.8 707.7,635.7 700.8,644.1 692.2,652.7 653.3,652.7 "/>
<polygon class="st0" points="640,327.8 630,327.8 623,339.2 500.2,339.2 485.8,327.8 476.6,327.8 476.6,408.5 485.2,408.5 	498.3,398.5 615.8,398.5 629.1,408.5 640,408.5 "/>
<polyline class="st0" points="476.6,628.1 476.6,443.7 470.6,427.9 470.6,315.1 476.6,300.3 476.6,88.5 468.5,71.8 461.4,57.1 	431,57.1 408.9,68.8 408.9,82.8 408.9,635.7 415.8,644.1 424.4,652.7 463.2,652.7 "/>
<line class="st3" x1="442.7" y1="97.5" x2="442.7" y2="320.3"/>
<line class="st3" x1="442.7" y1="413.3" x2="442.7" y2="625"/>
<line class="st3" x1="675.3" y1="97.5" x2="675.3" y2="320.3"/>
<line class="st3" x1="675.3" y1="413.3" x2="675.3" y2="625"/>
<circle class="st4" cx="558.3" cy="368.1" r="20.2"/>
<circle class="st4" cx="444.6" cy="368.5" r="20.2"/>
<circle class="st4" cx="675.3" cy="368.5" r="20.2"/>
<polyline class="st0" points="73.1,628.1 73.1,88.5 65,71.8 57.9,57.1 5.4,57.1 5.4,652.7 59.8,652.7 "/>
<polyline class="st0" points="73.1,282.1 292.6,62.6 351,62.6 351,88 107.5,331.5 96.3,343.6 72.5,343.6 "/>
<line class="st3" x1="39.2" y1="75.3" x2="39.2" y2="298.2"/>
<line class="st3" x1="39.2" y1="419.7" x2="39.2" y2="642.5"/>
<polyline class="st7" points="315.1,63.2 315.1,91.8 124.1,275.5 "/>
<circle class="st4" cx="39.2" cy="358.9" r="20.2"/>
<circle class="st4" cx="83.8" cy="310.9" r="20.2"/>
<polyline class="st0" points="73.1,429.7 292.6,649.1 351,649.1 351,623.8 107.5,380.2 96.3,368.1 72.5,368.1 "/>
<circle class="st4" cx="84" cy="401.1" r="20.2"/>
<polyline class="st7" points="315.1,648.7 315.1,620.1 124.1,435.3 "/>
<line class="st3" x1="640" y1="368.1" x2="476.6" y2="368.1"/>
<line class="st3" x1="558.3" y1="397.8" x2="558.3" y2="339.2"/>
</svg>
<span class="dot dot-bottom"></span>
<span class="dot dot-left"></span>
<span class="dot dot-right"></span>
</a>
<div class="sidebar-left-bottom-content">
<button id="desktop-about-button" class="icon-button info-button desktop-info-button" aria-label="About">
<svg viewBox="0 0 
20 20" fill="currentColor">
<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
</svg>
</button>
<label for="theme-checkbox" class="theme-toggle-label" title="Toggle theme">

<span id="theme-toggle" class="icon-button">
<span id="theme-dot"></span>
</span>
</label>
</div>
</div>

<nav class="nav-stacked-left">
<a href="#" data-navlink="section-2" class="nav-link-left">
<span class="nav-number"></span>
<span class="nav-text vertical-text">Work</span>
</a>
<a href="#" data-navlink="section-3" class="nav-link-left">
<span class="nav-number"></span>
<span class="nav-text vertical-text">Services</span>

</a>
<a href="#" data-navlink="section-4" class="nav-link-left">
<span class="nav-number"></span>
<span class="nav-text vertical-text">Inquiries</span>
</a>
</nav>

<main>
<section id="section-1">
<div class="section-1-wrapper"> 

<div id="canvas-container"></div>

<div class="marquee-container">
<div class="marquee-content-wrapper">
<div class="marquee-content">
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>

</div>
<div class="marquee-content" aria-hidden="true">
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>
<span>Kevin Hernandez</span>

</div>
</div>
</div>

</div>
</section>

<section id="section-2" class="center-section">
<div class="section-content">

<main class="portfolio-main">
<div class="portfolio-nav">
<div class="category-group">
<button class="section-btn active" data-gallery="3d"><span>3D</span></button>
</div>
<div class="category-group">

<button class="section-btn" data-gallery="graphic"><span>Graphic</span></button>
</div>
<div class="category-group">
<button class="section-btn" data-gallery="product"><span>Product</span></button>
</div>

</div>

<div class="portfolio-content-area">

<div class="portfolio-gallery">

<button id="mobile-info-toggle" class="icon-button info-button" aria-label="Toggle Info">
<svg viewBox="0 0 20 20" fill="currentColor">
<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 
0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
</svg>
</button>
<div class="scroller active" id="scroller-3d">

<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr1.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr13.jpg" alt="" /> </div>  
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr16.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr6.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr15.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr17.jpg" alt="" /> </div>  
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr2.jpg" alt="" /> </div>  
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr14.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr4.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/slab.jpg" alt="" /> </div>

</div>

<div class="scroller" id="scroller-graphic">

<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/gd1.jpg" alt="" />   </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr10.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/gd6.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/gd5.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/gd10.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/gd7.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/gd11.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/gd9.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/gd8.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/gd2.jpg" alt="" /> </div>

</div>

<div class="scroller" id="scroller-product">

<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/3d5.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/3d12.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/3d13.jpg" alt="" /> </div>  
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/3d2.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/3d6.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/3d7.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/3d8.1.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/3d9.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/3d1.jpg" alt="" /> </div>
<div class="portfolio-item">  <img class="portfolio-img" src="images/fulls/pr12.jpg" alt="" /> </div>

</div>

</div>

<div class="portfolio-info info-collapsed">

<div class="info-content active" data-info="3d">
<h3>3D Visualization</h3>
<p>
This collection showcases my work in modeling, texturing, and rendering.
I specialize in creating realistic environments and assets using tools like Blender, Substance Painter, and Marvelous Designer.</p>
<p>Scroll through the gallery to see detailed shots of character models, architectural visualizations, and prop designs.</p>
</div>

<div class="info-content" data-info="graphic">
<h3>Graphic Design</h3>
<p>
This section showcases my work in branding, layout, and visual systems.
My philosophy centers on clean, communicative, and compelling visuals using software Like Unreal Engine for environments and texturing with Adobe Illustrator, Photoshop, and Figma. </p>
<p>You'll find examples of logo/branding , posters, and editorial layouts.</p>
</div>

<div class="info-content" data-info="product">
<h3>Product Renders</h3>
<p>
In this section, I focus on translating product ideas into polished 3D visuals that feel tactile and true to life.
Using Software such as: Houdini, Octane, and Substance 3D Designer, I construct complex materials, fine-tune lighting, and deliver hyper-realistic product visualizations.
</p>
<p>Scroll through the gallery to see high-resolution renders of consumer goods, packaging concepts, and product hero shots designed for advertising, ecommerce, and branding.</p>
</div>

</div>

</div>
</main>

<div class="portfolio-modal" id="portfolio-modal">
<div class="modal-gall">

<div class="modal-gall-inner" id="modal-gall-inner">
</div>
</div>
</div>


</div>

</section>

<section id="section-3" class="center-section">
<div class="section-content">

<div class="container">
<div class="grid-side">

<div 
class="grid-item" data-service="motion">
<!--  
<img src="https://placehold.co/600x400/1a1a1a/ffffff?text=Motion" class="grid-item-bg">
-->    
<div class="grid-item-content"><div class="circle"></div><h3 class="item-title">Motion</h3></div>
</div>

<div 
class="grid-item" data-service="animation">
<!-- 
<img src="https://placehold.co/600x400/1a1a1a/ffffff?text=Animation" class="grid-item-bg">
-->    
<div class="grid-item-content"><div class="circle"></div><h3 class="item-title">Animation</h3></div>
</div>    

<div class="grid-item" data-service="ux">
<!-- 
<img src="https://placehold.co/600x400/1a1a1a/ffffff?text=Design" class="grid-item-bg">   -->    
<div class="grid-item-content"><div class="circle"></div><h3 class="item-title">UX/UI</h3></div>
</div>

<div class="grid-item" data-service="branding">
<!-- 
<img src="https://placehold.co/600x400/1a1a1a/ffffff?text=Brand" class="grid-item-bg">   -->    
<div class="grid-item-content"><div class="circle"></div><h3 class="item-title">Branding</h3></div>
</div>

<div class="grid-item" data-service="development">
<!-- 
<img src="https://placehold.co/600x400/1a1a1a/ffffff?text=Code" class="grid-item-bg">    -->    
<div class="grid-item-content"><div class="circle"></div><h3 class="item-title">Development</h3></div>

</div>

<div class="grid-item" data-service="strategy">
<!-- 
<img src="https://placehold.co/600x400/1a1a1a/ffffff?text=Interactivity" class="grid-item-bg">   -->    
<div class="grid-item-content"><div class="circle"></div><h3 class="item-title">Interactive Displays</h3></div>
</div>


<div class="grid-item" data-service="photography">
<!-- 
<img src="https://placehold.co/600x400/1a1a1a/ffffff?text=Staging" class="grid-item-bg">    -->    
<div class="grid-item-content"><div class="circle"></div><h3 class="item-title">Stage + <br> Lighting Design</h3></div>
</div>



<div class="grid-item" data-service="art">
<!-- 
<img src="https://placehold.co/600x400/1a1a1a/ffffff?text=Art" class="grid-item-bg">   -->    
<div class="grid-item-content"><div class="circle"></div><h3 class="item-title">Art Direction</h3></div>
</div>

</div>

<div class="display-side">

<div class="service-content" data-service="default">
<div class="service-content-inner">
<h2>Key Services</h2>
<p>This is what I focus on.<br>Additional services are available upon request.</p>

</div>
</div>

<div class="service-content" data-service="animation"><div class="service-content-inner"><h2>Animation </h2>
<p>Dynamic graphics that bring stories, products, and concepts to life through polished movement, expressive timing, and visually engaging sequences.</p>
</div></div>
<div class="service-content" data-service="motion"><div class="service-content-inner"><h2>Motion Graphics </h2>
<p>Clean, modern motion design that blends typography, shape language, and visual rhythm to communicate ideas with clarity and energy.</p>
</div></div>    
<div class="service-content" data-service="ux"><div class="service-content-inner"><h2>UX/UI</h2>
<p>Designing intuitive digital experiences focused on clarity, usability, and seamless interaction across platforms and devices.</p>
</div></div>
<div class="service-content" data-service="branding"><div class="service-content-inner"><h2>Branding</h2>
<p>Building memorable brand identities with thoughtful visuals, consistent messaging, and cohesive design systems that resonate with audiences.</p>
</div></div>
<div class="service-content" data-service="development"><div class="service-content-inner"><h2> Web Development</h2>
<p>Modern, clean, performant builds crafted with responsive layouts, smooth interactions, and scalable architecture.</p>
</div></div>
<div class="service-content" data-service="strategy"><div class="service-content-inner"><h2>Interactive Displays </h2>
<p>Creating immersive interactive installations that respond to user input, showcasing content through motion, light, and real-time design elements.</p>
</div></div>
<div class="service-content" data-service="photography"><div class="service-content-inner"><h2>Stage + Lighting Design</h2>
<p>High-impact visual storytelling through intentional lighting, spatial composition, and atmosphere tailored to performances and live environments.</p>
</div></div>
<div class="service-content" data-service="art"><div class="service-content-inner"><h2>Art Direction</h2>
<p>Crafting compelling visual narratives by guiding style, tone, and aesthetic choices across every creative touchpoint.</p>
</div></div>

</div>
</div>

</div>
</section>

<section id="section-4" class="center-section">
<div class="section-content">

<div class="text-container">
<div class="copyable-text" id="textToCopy" data-copy="hi@gmail.com">
HI@GMAIL.COM
</div>
<div class="copy-circle" id="copyButton">Copy Me</div>
</div>


<canvas id="breathingGrid"></canvas>
</div> </section>

<div id="modal-container-side">
<div class="modal-background">
<div class="modal-content">

<div class="modal-panel left">
<p class="ls">
I began my journey in 2019 with a focus on 3D and digital design, gradually expanding my expertise into animation and interactive development.
Today, as an independent designer, I combine design, programming, and 3D visualization to deliver innovative and impactful solutions.
<br>
<br>
My work spans two complementary areas.
For brands and companies, I design and develop interactive interfaces and experiences that prioritize clarity, function, and meaningful outcomes.
In parallel, I create 3D-driven visual art for musicians and public figures, producing work that blends technical precision with narrative depth and visual impact.
</p>

<br>   
<p class="ls">
CONTACT:
HI@GMAIL.COM
</p>
<br>   
<p class="ls">
<a class="lik" href="https://linkedin.com/in/kevinohernandez" target="_blank">LINKEDIN</a>
</p>
</div>
<div class="modal-panel right">
<div class="bb">

<img class="abtimg" src="images/abt2.webp" alt="" />    
</div> 
</div>
</div>
</div>
</div>

</main>

<nav class="nav-stacked-right">
<a href="#" data-navlink="section-2" class="nav-link">
<span class="nav-number"></span>
<span class="nav-text vertical-text">Work</span>
</a>
<a href="#" data-navlink="section-3" class="nav-link">
<span class="nav-number"></span>

<span class="nav-text vertical-text">Services</span>
</a>
<a href="#" data-navlink="section-4" class="nav-link">
<span class="nav-number"></span>
<span class="nav-text vertical-text">Inquiries</span>
</a>
</nav>


</div> 

<footer class="mobile-footer">
<label for="theme-checkbox" class="icon-button theme-toggle-label" title="Toggle theme">

<span id="theme-toggle" class="icon-button">
<span id="theme-dot"></span>
</span>
</label>  


<div class="mobile-footer-links">
<a href="#section-2" data-navlink="section-2">Work</a>
<a href="#section-3" data-navlink="section-3">Services</a>
<a href="#section-1" data-navlink="section-1" class="nav-link logo-button active">
<svg class="logo-svg" viewBox="0 0 712.7 712" xmlns="http://www.w3.org/2000/svg">
<polyline class="st0" points="640,628.1 640,443.7 645.9,427.9 645.9,315.1 640,300.3 640,88.5 648.1,71.8 655.2,57.1 685.6,57.1 	707.7,68.8 707.7,82.8 707.7,635.7 700.8,644.1 692.2,652.7 653.3,652.7 "/>
<polygon class="st0" points="640,327.8 630,327.8 623,339.2 500.2,339.2 485.8,327.8 476.6,327.8 476.6,408.5 485.2,408.5 	498.3,398.5 615.8,398.5 629.1,408.5 640,408.5 "/>
<polyline class="st0" points="476.6,628.1 476.6,443.7 470.6,427.9 470.6,315.1 476.6,300.3 476.6,88.5 468.5,71.8 461.4,57.1 	431,57.1 408.9,68.8 408.9,82.8 408.9,635.7 415.8,644.1 424.4,652.7 463.2,652.7 "/>
<line class="st3" x1="442.7" y1="97.5" x2="442.7" y2="320.3"/>
<line class="st3" x1="442.7" y1="413.3" x2="442.7" y2="625"/>
<line class="st3" x1="675.3" y1="97.5" x2="675.3" y2="320.3"/>
<line class="st3" x1="675.3" y1="413.3" x2="675.3" y2="625"/>
<circle class="st4" cx="558.3" cy="368.1" r="20.2"/>
<circle class="st4" cx="444.6" cy="368.5" r="20.2"/>
<circle class="st4" cx="675.3" cy="368.5" r="20.2"/>
<polyline class="st0" points="73.1,628.1 73.1,88.5 65,71.8 57.9,57.1 5.4,57.1 5.4,652.7 59.8,652.7 "/>
<polyline class="st0" points="73.1,282.1 292.6,62.6 351,62.6 351,88 107.5,331.5 96.3,343.6 72.5,343.6 "/>
<line class="st3" x1="39.2" y1="75.3" x2="39.2" y2="298.2"/>
<line class="st3" x1="39.2" y1="419.7" x2="39.2" y2="642.5"/>
<polyline class="st7" points="315.1,63.2 315.1,91.8 124.1,275.5 "/>
<circle class="st4" cx="39.2" cy="358.9" r="20.2"/>
<circle class="st4" cx="83.8" cy="310.9" r="20.2"/>
<polyline class="st0" points="73.1,429.7 292.6,649.1 351,649.1 351,623.8 107.5,380.2 96.3,368.1 72.5,368.1 "/>
<circle class="st4" cx="84" cy="401.1" r="20.2"/>
<polyline class="st7" points="315.1,648.7 315.1,620.1 124.1,435.3 "/>
<line class="st3" x1="640" y1="368.1" x2="476.6" y2="368.1"/>
<line class="st3" x1="558.3" y1="397.8" x2="558.3" y2="339.2"/>
</svg>
<span class="dot dot-bottom"></span>
<span class="dot dot-left"></span>
<span class="dot dot-right"></span>
</a>
<a href="#section-4" data-navlink="section-4">Inquiries</a>
<button id="mobile-about-button" class="abt" aria-label="About">
<a> About </a>
</button>

</div>

</footer>
</div> 


<script type="module">


// Reset scroll position on page load/refresh
if ('scrollRestoration' in history) {
history.scrollRestoration = 'manual';
}

// Force initial scroll position
window.addEventListener('load', function() {
const themeWrapper = document.querySelector('.theme-wrapper');
if (themeWrapper && window.innerWidth < 1025) {
themeWrapper.scrollTop = 0;
window.scrollTo(0, 0);
}
});

// --- Scroll Logic (Desktop & Mobile) ---

const sections = document.querySelectorAll('section');
const numSections = sections.length;
let currentSectionIndex = 0;

let isWheeling = false;
const scrollCooldown = 900;
const desktopNavLinksRight = document.querySelectorAll('.nav-stacked-right .nav-link');
const desktopNavLinksLeft = document.querySelectorAll('.nav-stacked-left .nav-link-left');
const desktopKHLink = document.querySelector('.sidebar-left .logo-button'); 

const mobileFooterLinks = document.querySelectorAll('.mobile-footer-links a');
const mobileKHLink = document.querySelector('.mobile-footer-top .logo-button'); 

const canvasContainer = document.getElementById('canvas-container');

function updateDesktopActiveNav(index) {
if (desktopKHLink) {
desktopKHLink.classList.toggle('active', index === 0);
}
desktopNavLinksRight.forEach((link, i) => link.classList.toggle('active', i < index));
desktopNavLinksLeft.forEach((link, i) => link.classList.toggle('active', i < index));

const rightNav = document.querySelector('.nav-stacked-right');
if (rightNav) {
rightNav.classList.toggle('is-complete', index === numSections - 1);
}

if (canvasContainer) {
canvasContainer.classList.add('is-visible');
}
}

function scrollToSectionDesktop(index) {
if (document.body.classList.contains('modal-active')) return;
if (index < 0 || index >= numSections || isWheeling) return; 
if (index === currentSectionIndex) return; 

isWheeling = true;
sections.forEach((section, i) => {
if (i <= index) {
section.style.transform = 'translateX(0)';
section.classList.add('is-active'); 
} else {
section.style.transform = 'translateX(100%)';
section.classList.remove('is-active'); 
}
});

currentSectionIndex = index;
updateDesktopActiveNav(currentSectionIndex);

setTimeout(() => {
isWheeling = false;
}, scrollCooldown);
}

let wheelTimeout = null;
let wheelDirection = 0;

function handleDesktopWheel(e) {
if (document.body.classList.contains('modal-active')) return;

let target = e.target;
let scrollerElement = null;

while (target && target !== document.body) {
if (target.classList && target.classList.contains('scroller')) {
scrollerElement = target;
break;
}
target = target.parentElement;
}

if (scrollerElement && Math.abs(e.deltaX) > 0) {
const canScrollLeft = scrollerElement.scrollLeft > 0;
const canScrollRight = scrollerElement.scrollLeft < (scrollerElement.scrollWidth - scrollerElement.clientWidth - 1);
if ((e.deltaX < 0 && canScrollLeft) || (e.deltaX > 0 && canScrollRight)) {
return;
}
}

e.preventDefault();
if (isWheeling) return; 

if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) {
return;
}

wheelDirection += e.deltaY;

if (wheelTimeout) {
clearTimeout(wheelTimeout);
}

wheelTimeout = setTimeout(() => {
if (Math.abs(wheelDirection) > 10) {
if (wheelDirection > 0) {
scrollToSectionDesktop(currentSectionIndex + 1);
} else {
scrollToSectionDesktop(currentSectionIndex - 1);
}
}
wheelDirection = 0;
wheelTimeout = null;
}, 10);
}

function handleDesktopKeydown(e) {
if (document.body.classList.contains('modal-active')) return;
if (isWheeling) return;

if (e.key === 'ArrowDown' || e.key === 'PageDown' || e.key === ' ') {
e.preventDefault();
scrollToSectionDesktop(currentSectionIndex + 1);
} else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
e.preventDefault();
scrollToSectionDesktop(currentSectionIndex - 1);
} else if (e.key === 'Home') {
e.preventDefault();
scrollToSectionDesktop(0);
} else if (e.key === 'End') {
e.preventDefault();
scrollToSectionDesktop(numSections - 1);
}
}

let isSwipeProcessed = false;

function handleDesktopSwipe() {
if (isWheeling || isSwipeProcessed) return; 
if (document.body.classList.contains('modal-active')) return;
const swipeThreshold = 50;
const swipeDistance = Math.abs(touchStartY - touchEndY);
if (swipeDistance > swipeThreshold) {
isSwipeProcessed = true;
if (touchStartY - touchEndY > swipeThreshold) {
scrollToSectionDesktop(currentSectionIndex + 1);
} else if (touchEndY - touchStartY > swipeThreshold) {
scrollToSectionDesktop(currentSectionIndex - 1);
}

setTimeout(() => {
isSwipeProcessed = false;
}, scrollCooldown);
}
}

let observer;

function initMobileScrollObserver() {
if (!('IntersectionObserver' in window)) {
console.warn('IntersectionObserver not supported, mobile nav highlighting will not work.');
document.getElementById('section-1')?.classList.add('is-active');
if (canvasContainer) canvasContainer.classList.add('is-visible');
return;
}

// Immediately mark section-1 as active
document.getElementById('section-1')?.classList.add('is-active');
if (canvasContainer) canvasContainer.classList.add('is-visible');

observer = new IntersectionObserver((entries) => {
const mobileFooter = document.querySelector('.mobile-footer');

entries.forEach(entry => {
const id = entry.target.id;
if (entry.isIntersecting) {
if (mobileFooter) {
mobileFooter.classList.toggle('section-2-active', id === 'section-2');
}

mobileFooterLinks.forEach(link => {
link.classList.toggle('active', link.hash === `#${id}`);
});

if (mobileKHLink) {
mobileKHLink.classList.toggle('active', id === 'section-1');
}

entry.target.classList.add('is-active');

if (id === 'section-1' && canvasContainer) {
canvasContainer.classList.add('is-visible');
}
} else {
entry.target.classList.remove('is-active');
}
});
}, {
root: document.querySelector('.theme-wrapper'), 
threshold: 0.5
});

sections.forEach(section => observer.observe(section));
}

function cleanupMobileScrollObserver() {
if (observer) {
sections.forEach(section => observer.unobserve(section));
observer.disconnect();
observer = null;
}
}

let touchStartY = 0;
let touchEndY = 0;

function handleTouchStart(e) {
if (document.body.classList.contains('modal-active')) return;
touchStartY = e.changedTouches[0].screenY;
}

function handleTouchEnd(e) {
if (document.body.classList.contains('modal-active')) return;
touchEndY = e.changedTouches[0].screenY;

if (window.innerWidth >= 1025) { 
handleDesktopSwipe();
}
}

let isDesktop = window.innerWidth >= 1025;

function setupEventListeners() {
if (isDesktop) {
window.addEventListener('wheel', handleDesktopWheel, { passive: false });
window.addEventListener('keydown', handleDesktopKeydown);
window.addEventListener('touchstart', handleTouchStart, { passive: false });
window.addEventListener('touchend', handleTouchEnd, { passive: false });

sections.forEach((section, i) => {
if (i === 0) {
section.style.transform = 'translateX(0)';
section.classList.add('is-active'); 
} else {
section.style.transform = 'translateX(100%)';
section.classList.remove('is-active');
}
});

updateDesktopActiveNav(0);
cleanupMobileScrollObserver();

setTimeout(() => {
if (document.querySelector('.theme-wrapper')) {
document.querySelector('.theme-wrapper').classList.add('is-loaded');
}
}, 100);

} else {
window.removeEventListener('wheel', handleDesktopWheel);
window.removeEventListener('keydown', handleDesktopKeydown);
window.removeEventListener('touchstart', handleTouchStart);
window.removeEventListener('touchend', handleTouchEnd);

sections.forEach(section => {
section.style.transform = '';
});

// Ensure we start at top on mobile
const themeWrapper = document.querySelector('.theme-wrapper');
if (themeWrapper) {
themeWrapper.scrollTop = 0;
}

initMobileScrollObserver();
}
}

window.addEventListener('resize', () => {
const newIsDesktop = window.innerWidth >= 1025; 
if (newIsDesktop !== isDesktop) {
isDesktop = newIsDesktop;
setupEventListeners();
}
});

document.querySelectorAll('.nav-link, .nav-link-left, .sidebar-left .logo-button').forEach(link => {
link.addEventListener('click', (e) => {
e.preventDefault(); 
if (isDesktop) {
if (document.body.classList.contains('modal-active')) return;
const targetId = link.getAttribute('data-navlink');
if (!targetId) return; 

const targetIndex = parseInt(targetId.split('-')[1]) - 1;
if (targetIndex !== currentSectionIndex) {
scrollToSectionDesktop(targetIndex); 
}
}
});
});

document.querySelectorAll('.mobile-footer-top a, .mobile-footer-links a').forEach(link => {
link.addEventListener('click', (e) => {
if (!isDesktop) {
e.preventDefault();
const targetId = link.getAttribute('href');
const targetElement = document.querySelector(targetId);
if (targetElement) {
targetElement.scrollIntoView({ behavior: 'smooth' });
}
} else {
e.preventDefault();
}
});
});

// Initialize on DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
// Force scroll to top on mobile
const themeWrapper = document.querySelector('.theme-wrapper');
if (themeWrapper && window.innerWidth < 1025) {
themeWrapper.scrollTop = 0;
window.scrollTo(0, 0);
document.getElementById('section-1')?.classList.add('is-active');
if (canvasContainer) canvasContainer.classList.add('is-visible');
}

setupEventListeners();
});
</script>

<script type="module">
// THREE.JS SECTION - OPTIMIZED
let scene, camera, renderer, p;
let models = [];
let mixers = [];
let currentSphereColor = null;
let container;
let section1; // Reference to the section
let isVisible = true; // Track visibility

//  CONFIGURATION
const modelPaths = [
    'https://cdn.shopify.com/3d/models/dde04961d5909f4a/gh6.glb', 
    'https://cdn.shopify.com/3d/models/69aff6bb9e30b8fb/gh7.glb'
];
const MODEL_POSITIONS = [[0, -0.5, -3.5], [0.0, -0.425, -3.45]];
const MODEL_SCALES = [1.75, 1.75];
const MODEL_ROTATIONS = [[0, 0, 0], [0, 0, 0]];
const MODEL_Y_SINE_WAVE = [[Math.PI / 6, 0.15], [Math.PI / 6, 0.15]];
const CAMERA_Y_POSITION = { desktop: 0, mobile: 0.15 };

// Utilities
function invertColor(color) {
    return new THREE.Color(1 - color.r, 1 - color.g, 1 - color.b);
}

let gu, sizes = [], shift = [], clock;

function getTorusPoints(count, radius, tube, tiltX, tiltY) {
    const points = [];
    for (let i = 0; i < count; i++) {
        const u = (i / count) * Math.PI * 2;
        const v = ((i * 137.5) % count / count) * Math.PI * 2;
        const x = (radius + tube * Math.cos(v)) * Math.cos(u);
        const y = (radius + tube * Math.cos(v)) * Math.sin(u);
        const z = tube * Math.sin(v);
        const p = new THREE.Vector3(x, y, z);
        p.applyEuler(new THREE.Euler(tiltX, tiltY, 0));
        points.push(p);
    }
    return points;
}

//  OPTIMIZED THEME UPDATE
// Instead of checking every frame, we call this function only when the class changes
function updateThemeFromCSS() {
    if (!renderer || !p) return;

    // Get styles once
    const bodyStyle = getComputedStyle(document.body);
    const newColorHex = bodyStyle.getPropertyValue('--sphere-color').trim();
    const newBgColor = bodyStyle.getPropertyValue('--bg-color').trim();
    const newColorInt = parseInt(newColorHex.replace('#', ''), 16);

    // Update Particles Material
    if (newBgColor === '#ffffff' || newBgColor === 'white' || newBgColor === '#fff') {
        p.material.blending = THREE.NormalBlending;
        p.material.transparent = false;
        p.material.opacity = 1.0;
    } else {
        p.material.blending = THREE.AdditiveBlending;
        p.material.transparent = true;
        p.material.opacity = 1.0;
    }
    
    // Update Colors if changed
    if (newColorInt !== currentSphereColor) {
        currentSphereColor = newColorInt;
        const newThreeColor = new THREE.Color(currentSphereColor);
        
        // Update Shader Uniform
        if (gu && gu.color) {
            gu.color.value.setHex(currentSphereColor);
        }
        
        // Update Particle Color
        p.material.color.setHex(currentSphereColor);
        p.material.needsUpdate = true;

        // Update Models
        if (models.length > 0) {
            models.forEach((model) => {
                const modelIndex = model.userData.modelIndex;
                model.traverse((child) => {
                    if (child.isMesh && child.material) {
                        if (modelIndex === 1) {
                            // Invert for model 2
                            const inverted = new THREE.Color(1 - newThreeColor.r, 1 - newThreeColor.g, 1 - newThreeColor.b);
                            child.material.color.copy(inverted);
                        } else {
                            // Normal theme for model 1
                            child.material.color.copy(newThreeColor);
                        }
                        child.material.needsUpdate = true;
                    }
                });
            });
        }
    }
}

function initThreeJS() {
    container = document.getElementById('canvas-container');
    section1 = document.getElementById('section-1');
    if (!container) { setTimeout(initThreeJS, 500); return; }

    container.style.width = '100%';
    container.style.height = '100svh';
    container.style.position = 'relative';

    scene = new THREE.Scene();
    const fov = 75;
    const aspect = window.innerWidth / window.innerHeight;
    const near = 0.1;
    const far = 1000;
    camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
    
    const isDesktop = window.innerWidth >= 1025;
    camera.position.z = 4;
    camera.position.y = isDesktop ? CAMERA_Y_POSITION.desktop : CAMERA_Y_POSITION.mobile;

    // OPTIMIZATION: Limit pixel ratio to 2 for performance on retina screens
    renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); 
    container.appendChild(renderer.domElement);
    container.classList.add('is-visible');

    // Initial Color Setup
    const initialColor = getComputedStyle(document.body).getPropertyValue('--sphere-color').trim();
    currentSphereColor = parseInt(initialColor.replace('#', ''), 16);

    // --- GLB LOADER ---
    const loader = new THREE.GLTFLoader();
    const themeColor = new THREE.Color(currentSphereColor);

    modelPaths.forEach((path, index) => {
        loader.load(path, function (gltf) {
            const model = gltf.scene;
            model.userData.modelIndex = index;

            // Apply transforms
            const scale = MODEL_SCALES[index] || 1.5;
            const pos = MODEL_POSITIONS[index] || [0,0,0];
            const rot = MODEL_ROTATIONS[index] || [0,0,0];

            model.scale.set(scale, scale, scale);
            model.position.set(pos[0], pos[1], pos[2]);
            model.rotation.set(rot[0], rot[1], rot[2]);

            // Setup Animations
            if (gltf.animations && gltf.animations.length > 0) {
                const mixer = new THREE.AnimationMixer(model);
                mixers.push(mixer);
                gltf.animations.forEach((clip) => {
                    mixer.clipAction(clip).play();
                });
            }

            // Apply Initial Material
            model.traverse((child) => {
                if (child.isMesh && child.material) {
                    const originalMaterial = child.material;
                    let matColor = themeColor.clone();
                    
                    if (index === 1) { // Invert logic
                         matColor = new THREE.Color(1 - themeColor.r, 1 - themeColor.g, 1 - themeColor.b);
                    }

                    child.material = new THREE.MeshBasicMaterial({ 
                        color: matColor,
                        side: THREE.DoubleSide,
                        skinning: originalMaterial.skinning || false,
                        morphTargets: originalMaterial.morphTargets || false
                    });
                }
            });

            scene.add(model);
            models.push(model);
        });
    });

    // --- PARTICLES ---
    gu = { time: { value: 0 }, color: { value: new THREE.Color(currentSphereColor) } };
    let pushShift = () => {
        shift.push(
            Math.random() * Math.PI,
            Math.random() * Math.PI * 2,
            (Math.random() * 0.9 + 0.1) * Math.PI * 0.1,
            Math.random() * 0.25 + 0.1
        );
    }

    const torus1Points = getTorusPoints(100, 3, 0.0125, Math.PI / 2.5, Math.PI / 4);
    const torus2Points = getTorusPoints(100, 3, 0.0125, Math.PI / 2.5, -Math.PI / 4);
    const pts = [...torus1Points, ...torus2Points];
    
    pts.forEach(pt => {
        sizes.push(Math.random() * 0.5 + 1);
        pushShift();
    });

    let g = new THREE.BufferGeometry().setFromPoints(pts);
    g.setAttribute("sizes", new THREE.Float32BufferAttribute(sizes, 1));
    g.setAttribute("shift", new THREE.Float32BufferAttribute(shift, 4));

    let m = new THREE.PointsMaterial({
        size: 0.1,
        transparent: true,
        depthTest: false,
        blending: THREE.AdditiveBlending,
        onBeforeCompile: shader => {
            shader.uniforms.time = gu.time;
            shader.uniforms.color = gu.color;
            shader.vertexShader = `
                uniform float time;
                uniform vec3 color;
                attribute float sizes;
                attribute vec4 shift;
                varying vec3 vColor;
                ${shader.vertexShader}
            `.replace(
                `gl_PointSize = size;`,
                `gl_PointSize = size * sizes;`
            ).replace(
                `#include <color_vertex>`,
                `#include <color_vertex>
                float d = length(abs(position) / vec3(40., 10., 40));
                d = clamp(d, 0., 1.);
                vColor = color;`
            ).replace(
                `#include <begin_vertex>`,
                `#include <begin_vertex>
                float t = time;
                float moveT = mod(shift.x + shift.z * t, PI2);
                float moveS = mod(shift.y + shift.z * t, PI2);
                transformed += vec3(cos(moveS) * sin(moveT), cos(moveT), sin(moveS) * sin(moveT)) * shift.w;`
            );
            shader.fragmentShader = `${shader.fragmentShader}`
            .replace(
                `vec4 diffuseColor = vec4( diffuse, opacity );`,
                `vec2 uv = abs((gl_PointCoord - 0.5) * 2.);
                float d = length(uv - vec2(1));
                float f = 1. - step(d, 1.);
                if (f < 0.1) discard;
                vec4 diffuseColor = vec4( diffuse, opacity );`
            );
        }
    });

    p = new THREE.Points(g, m);
    scene.add(p);

    clock = new THREE.Clock();

    // --- OPTIMIZATION: OBSERVERS ---
    
    // 1. Theme Observer: Watch for class changes on body to update colors
    const themeObserver = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.attributeName === "class") {
                updateThemeFromCSS();
            }
        });
    });
    themeObserver.observe(document.body, { attributes: true });
    // Run once to match initial state
    updateThemeFromCSS();

    // 2. Visibility Observer: Only render when Section 1 is visible
    const visibilityObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                isVisible = true;
                renderer.setAnimationLoop(animate); // Start loop
            } else {
                isVisible = false;
                renderer.setAnimationLoop(null); // Stop loop
            }
        });
    }, { threshold: 0 }); // Trigger as soon as one pixel leaves/enters
    
    if (section1) {
        visibilityObserver.observe(section1);
    } else {
        // Fallback if observer fails
        renderer.setAnimationLoop(animate);
    }
}

function animate() {
    if (!clock || !gu || !renderer) return;

    const delta = clock.getDelta();
    let t = clock.getElapsedTime() * 0.25;
    gu.time.value = t * Math.PI;

    // Update Mixers
    mixers.forEach(mixer => mixer.update(delta));

    // Rotate Particles
    if (p) {
        p.rotation.y += 0.001;
        p.rotation.x += 0.0005;
    }

    // Rotate Models
    if (models.length > 0) {
        models.forEach(model => {
            const modelIndex = model.userData.modelIndex;
            const staticRotation = MODEL_ROTATIONS[modelIndex] || [0, 0, 0];
            const sineWave = MODEL_Y_SINE_WAVE[modelIndex] || [0, 1];

            // Always face camera on X axis at 45 degrees
            model.rotation.x = Math.PI / 4; 

            // Sine wave oscillation
            const amplitude = sineWave[0];
            const speed = sineWave[1];
            model.rotation.y = staticRotation[1] + Math.sin(clock.getElapsedTime() * speed) * amplitude;
            model.rotation.z = staticRotation[2];
        });
    }

    renderer.render(scene, camera);
}

function onWindowResize() {
    if (camera && renderer && container) {
        const width = container.clientWidth; // Use container width, safer
        const height = container.clientHeight;
        const aspect = width / height;
        camera.aspect = aspect;
        
        const isDesktop = window.innerWidth >= 1025;
        camera.position.y = isDesktop ? CAMERA_Y_POSITION.desktop : CAMERA_Y_POSITION.mobile;

        camera.updateProjectionMatrix();
        renderer.setSize(width, height);
        
        // Force a single render if we are paused, so layout doesn't look broken
        if (!isVisible) {
             renderer.render(scene, camera);
        }
    }
}

window.addEventListener('resize', onWindowResize, false);
document.addEventListener('DOMContentLoaded', () => {
    setTimeout(initThreeJS, 100);
});
</script>


<script>
// ABOUT (Vanilla JS)
document.addEventListener('DOMContentLoaded', () => {
    // Get references to elements
    const modal = document.getElementById('modal-container-side');
    const themeWrapper = document.querySelector('.theme-wrapper');
    // Select both desktop and mobile buttons
    const aboutButtons = document.querySelectorAll('#desktop-about-button, #mobile-about-button');

    // Check if we're on the mobile layout (matching your CSS breakpoint)
    const isMobile = () => window.innerWidth <= 1024;

    const toggleModal = (e) => {
        // Prevent default anchor behavior
        e.preventDefault();

        // Check if modal is currently visible
        if (modal.classList.contains('visible')) {
            // --- CLOSE MODAL ---
            modal.classList.add('out');
            document.body.classList.remove('modal-active');

            // Reset top style only if we're on mobile
            if (isMobile()) {
                // Use a timeout to reset *after* the close animation
                setTimeout(() => {
                    modal.style.top = ''; 
                }, 500); // Match animation duration
            }
        } else {
            // --- OPEN MODAL ---
            
            // On mobile, we need to align the modal to the current scroll position
            if (isMobile() && themeWrapper) {
                const scrollTop = themeWrapper.scrollTop; // Get current scroll position
                modal.style.top = `${scrollTop}px`; // Set modal's top to the scroll position
            }

            // Remove all existing classes (reset) then add 'visible'
            modal.className = 'visible';
            document.body.classList.add('modal-active');
        }
    };

    // Attach click listeners to both buttons
    aboutButtons.forEach(button => {
        button.addEventListener('click', toggleModal);
    });

    // Handle Animation End to clean up classes
    if (modal) {
        modal.addEventListener('animationend', (e) => {
            // Ensure the event fired on the modal itself, not a child
            if (e.target === modal && modal.classList.contains('out')) {
                modal.removeAttribute('class');
            }
        });
    }
});
</script>

<script>
// THEME   
document.addEventListener('DOMContentLoaded', function() {
const themeCheckbox = document.getElementById('theme-checkbox');
if (themeCheckbox) {
themeCheckbox.addEventListener('change', function() {
document.body.classList.toggle('light-mode', this.checked);
});

document.body.classList.toggle('light-mode', themeCheckbox.checked);
}

});


</script>


<script>
// S-2  

document.addEventListener('DOMContentLoaded', () => {

    // --- Mobile Info Toggle Logic ---
    const mobileInfoToggle = document.getElementById('mobile-info-toggle');
    const portfolioInfoSection = document.querySelector('.portfolio-info');

    if (mobileInfoToggle && portfolioInfoSection) {
        mobileInfoToggle.addEventListener('click', () => {
            portfolioInfoSection.classList.toggle('info-collapsed');
            mobileInfoToggle.classList.toggle('active');
        });
    }
    // --- END: Mobile Info Toggle Logic ---


    const buttons = document.querySelectorAll('.section-btn');
    const mobileWorkNavLinks = document.querySelectorAll('.mobile-work-nav-link'); 
    
    const scrollers = {
        '3d': document.getElementById('scroller-3d'),
        'graphic': document.getElementById('scroller-graphic'),
        'product': document.getElementById('scroller-product')
    };

    // Select info content
    const infoContents = {
        '3d': document.querySelector('.info-content[data-info="3d"]'),
        'graphic': document.querySelector('.info-content[data-info="graphic"]'),
        'product': document.querySelector('.info-content[data-info="product"]')
    };

    // Save scroll positions
    const scrollPositions = {
        '3d': 0,
        'graphic': 0,
        'product': 0
    };

    let currentGallery = '3d';

    function updateProgress(scroller, button) {
        if (!button) return;
        const scrollLeft = scroller.scrollLeft;
        const scrollWidth = scroller.scrollWidth - scroller.clientWidth;
        const progress = scrollWidth > 0 ? (scrollLeft / scrollWidth) * 100 : 0;
        button.style.setProperty('--progress', `${progress}%`);
    }

    // Function switches gallery, info content and restores scroll
    function switchGallery(newGallery) {
        if (newGallery === currentGallery) return;

        // Save current scroll position
        scrollPositions[currentGallery] = scrollers[currentGallery].scrollLeft;

        // --- Gallery Scroller ---
        scrollers[currentGallery].classList.remove('active');
        scrollers[newGallery].classList.add('active');

        // Restore new gallery's scroll position
        scrollers[newGallery].scrollLeft = scrollPositions[newGallery];

        // --- Info Content ---
        infoContents[currentGallery].classList.remove('active');
        infoContents[newGallery].classList.add('active');

        currentGallery = newGallery;

        const activeButton = document.querySelector(`.section-btn[data-gallery="${newGallery}"]`);
        const activeMobileLink = document.querySelector(`.mobile-work-nav-link[data-gallery="${newGallery}"]`);
        
        updateProgress(scrollers[newGallery], activeButton);
        updateProgress(scrollers[newGallery], activeMobileLink);
    }

    buttons.forEach(btn => {
        btn.addEventListener('click', () => {
            const galleryType = btn.dataset.gallery;
            buttons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Sync mobile links
            mobileWorkNavLinks.forEach(l => l.classList.remove('active'));
            const matchingLink = document.querySelector(`.mobile-work-nav-link[data-gallery="${galleryType}"]`);
            matchingLink?.classList.add('active');

            switchGallery(galleryType);
        });
    });

    // Add listeners for mobile links
    mobileWorkNavLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const galleryType = link.dataset.gallery;

            mobileWorkNavLinks.forEach(l => l.classList.remove('active'));
            link.classList.add('active');

            // Sync desktop/tablet buttons
            buttons.forEach(b => b.classList.remove('active'));
            const matchingButton = document.querySelector(`.section-btn[data-gallery="${galleryType}"]`);
            matchingButton?.classList.add('active');

            switchGallery(galleryType);
        });
    });

    Object.keys(scrollers).forEach(key => {
        scrollers[key].addEventListener('scroll', () => {
            if (key === currentGallery) {
                const activeButton = document.querySelector(`.section-btn[data-gallery="${key}"]`);
                const activeMobileLink = document.querySelector(`.mobile-work-nav-link[data-gallery="${key}"]`);

                updateProgress(scrollers[key], activeButton);
                updateProgress(scrollers[key], activeMobileLink);

                // Save scroll position as user scrolls
                scrollPositions[key] = scrollers[key].scrollLeft;
            }
        });
    });

    const initialButton = document.querySelector(`.section-btn[data-gallery="${currentGallery}"]`);
    const initialMobileLink = document.querySelector(`.mobile-work-nav-link[data-gallery="${currentGallery}"]`);
    updateProgress(scrollers[currentGallery], initialButton);
    updateProgress(scrollers[currentGallery], initialMobileLink);


    // --- UPDATED: Lightbox/Modal Logic ---
    const modal = document.getElementById('portfolio-modal');
    const modalContentInner = document.getElementById('modal-gall-inner');
    const portfolioItems = document.querySelectorAll('.portfolio-item');

    portfolioItems.forEach(item => {
        item.addEventListener('click', () => {
            // Clone the item's content (in this case, just the text/image)
            const itemContent = item.innerHTML; 
            modalContentInner.innerHTML = itemContent;

            // Show the modal
            modal.classList.add('active');
            
            // LOCK SCROLLING: Prevent section navigation
            document.body.classList.add('modal-active');
        });
    });

    function closeModal() {
        modal.classList.remove('active');
        
        // UNLOCK SCROLLING: Resume section navigation
        document.body.classList.remove('modal-active');

        // Clear content after transition
        setTimeout(() => {
            modalContentInner.innerHTML = '';
        }, 300);
    }

    // Close modal by clicking on the background or the content
    modal.addEventListener('click', closeModal);
    modalContentInner.addEventListener('click', closeModal);
});
</script>

<script>
// S-3    
const isMobile = window.matchMedia("(max-width: 1024px)").matches;
if (isMobile) {
const items = document.querySelectorAll(".grid-item");
items.forEach(item => {
item.addEventListener("click", () => {
const service = item.getAttribute("data-service");
const targetPanel = document.querySelector(`.service-content[data-service="${service}"]`);

// Check if clicking the already active item (double-click behavior)
if (item.classList.contains("active")) {
// Return to key services (default state)
items.forEach(i => i.classList.remove("active"));
document.querySelectorAll(".service-content").forEach(s => s.classList.remove("active"));

// Show the default/key services panel
const defaultPanel = document.querySelector('.service-content[data-service="default"]');
if (defaultPanel) {

defaultPanel.classList.add("active");
}

document.body.classList.remove("mobile-has-active");
} else {
// Normal click - activate the clicked item
items.forEach(i => i.classList.remove("active"));
document.querySelectorAll(".service-content").forEach(s => s.classList.remove("active"));
item.classList.add("active");
if (targetPanel) {
targetPanel.classList.add("active");
}
document.body.classList.add("mobile-has-active");
}
});
});
}
</script>


<script>
// S-4 (Inquiries & Breathing Grid) - OPTIMIZED
document.addEventListener('DOMContentLoaded', () => {
    const canvas = document.getElementById('breathingGrid');
    const ctx = canvas.getContext('2d');
    const textEl = document.getElementById('textToCopy');
    const section4 = document.getElementById('section-4'); // Reference to the container
    
    let dots = [];
    let spacing = 80;
    let mouse = { x: -1000, y: -1000 };
    let time = 0;
    
    // Animation State Control
    let animationFrameId;
    let isAnimating = false;

    // Function to get current theme color
    function getThemeColor() {
        try {
            const computedStyle = getComputedStyle(document.body);
            const textColor = computedStyle.getPropertyValue('--text-color').trim();
            if (textColor && textColor.startsWith('#')) {
                const hex = textColor.replace('#', '');
                const r = parseInt(hex.substring(0, 2), 16);
                const g = parseInt(hex.substring(2, 4), 16);
                const b = parseInt(hex.substring(4, 6), 16);
                if (!isNaN(r) && !isNaN(g) && !isNaN(b)) {
                    return { r, g, b };
                }
            }
        } catch (e) { console.error(e); }
        return { r: 255, g: 255, b: 255 };
    }

    function resizeCanvas() {
        const rect = canvas.parentElement.getBoundingClientRect();
        canvas.width = rect.width;
        canvas.height = rect.height;
        spacing = canvas.width < 480 ? 40 : canvas.width < 768 ? 60 : 80;
        
        dots = [];
        const numCols = Math.floor(canvas.width / spacing) + 1;
        const numRows = Math.floor(canvas.height / spacing) + 1;
        const gridWidth = (numCols - 1) * spacing;
        const gridHeight = (numRows - 1) * spacing;
        const offsetX = (canvas.width - gridWidth) / 2;
        const offsetY = (canvas.height - gridHeight) / 2;

        for(let r = 0; r < numRows; r++){
            for(let c = 0; c < numCols; c++){
                dots.push({ x: (c * spacing) + offsetX, y: (r * spacing) + offsetY });
            }
        }
        
        // If we resize while paused, we force one frame draw so it doesn't look broken
        if (!isAnimating) {
             requestAnimationFrame(drawFrame);
        }
    }

    // Initialize Canvas
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
    window.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        mouse.x = e.clientX - rect.left;
        mouse.y = e.clientY - rect.top;
    });

    // The Logic that draws a single frame
    function drawFrame() {
        time += 0.016;
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const rect = textEl.getBoundingClientRect();
        const canvasRect = canvas.getBoundingClientRect();
        const textPadding = 20;

        const textLeft = rect.left - canvasRect.left - textPadding;
        const textRight = rect.right - canvasRect.left + textPadding;
        const textTop = rect.top - canvasRect.top - textPadding;
        const textBottom = rect.bottom - canvasRect.top + textPadding;

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const waveSpeed = 60;
        const waveThickness = 40;
        const maxDist = Math.hypot(centerX, centerY) + waveThickness;
        const currentWave = (time * waveSpeed) % maxDist;
        const color = getThemeColor();

        dots.forEach(dot => {
            // Skip dots under the text box
            if(dot.x > textLeft && dot.x < textRight && dot.y > textTop && dot.y < textBottom) return;

            const dist = Math.hypot(dot.x - centerX, dot.y - centerY);
            const distToWave = Math.abs(dist - currentWave);
            let pulseFactor = 0;
            
            if(distToWave < waveThickness/2){
                pulseFactor = 1 - distToWave / (waveThickness/2);
                pulseFactor = Math.sin(pulseFactor * Math.PI / 2);
            }

            const mouseDist = Math.hypot(dot.x - mouse.x, dot.y - mouse.y);
            let glowFactor = 0;
            const glowRadius = 50;
            if(mouseDist < glowRadius){
                glowFactor = (1 - mouseDist / glowRadius);
            }

            const size = (canvas.width < 480 ? 2 : 4) + pulseFactor * 12 + glowFactor * 10;
            const opacity = Math.min(1, 0.2 + pulseFactor * 0.8 + glowFactor * 0.9);

            ctx.beginPath();
            ctx.arc(dot.x, dot.y, size, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(${color.r}, ${color.g}, ${color.b}, ${opacity})`;
            ctx.fill();
        });
    }

    // The Animation Loop
    function animate() {
        if (!isAnimating) return; // Stop recursion if flag is false
        drawFrame();
        animationFrameId = requestAnimationFrame(animate);
    }

    // --- OPTIMIZATION: Intersection Observer ---
    // Only run the loop when #section-4 is visible
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Section is visible: Start the loop if not already running
                if (!isAnimating) {
                    isAnimating = true;
                    animate();
                }
            } else {
                // Section is hidden: Stop the loop
                isAnimating = false;
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                }
            }
        });
    }, { threshold: 0.1 }); // Trigger when 10% of the section is visible

    if (section4) {
        observer.observe(section4);
    }

    // --- Copy Button Logic ---
    const copyButton = document.getElementById('copyButton');
    function copyToClipboard() {
        const textToCopy = textEl.getAttribute('data-copy') || textEl.textContent.replace(/^EMAIL:\s*/i, '');
        navigator.clipboard.writeText(textToCopy).then(() => {
            copyButton.textContent = 'Copied!';
            copyButton.classList.add('copied');
            setTimeout(() => {
                copyButton.textContent = 'Copy Me';
                copyButton.classList.remove('copied');
            }, 1500);
        }).catch(err => console.error(err));
    }

    if (copyButton && textEl) {
        copyButton.addEventListener('click', copyToClipboard);
        textEl.addEventListener('click', copyToClipboard);
        textEl.addEventListener('touchstart', (e) => e.preventDefault());
    }
});
</script>





















































